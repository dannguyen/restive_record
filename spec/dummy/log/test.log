  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (2.3ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to SetUpTestTables (20110208155312)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) [0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "versions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "item_type" varchar(255) NOT NULL, "item_id" integer NOT NULL, "event" varchar(255) NOT NULL, "whodunnit" varchar(255), "object" text, "object_changes" text, "created_at" datetime, "answer" integer, "action" varchar(255), "question" varchar(255), "article_id" integer, "title" varchar(255), "ip" varchar(255), "user_agent" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_versions_on_item_type_and_item_id" ON "versions" ("item_type", "item_id")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "post_versions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "item_type" varchar(255) NOT NULL, "item_id" integer NOT NULL, "event" varchar(255) NOT NULL, "whodunnit" varchar(255), "object" text, "created_at" datetime, "ip" varchar(255), "user_agent" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE INDEX "index_post_versions_on_item_type_and_item_id" ON "post_versions" ("item_type", "item_id")[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "wotsits" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "widget_id" integer, "name" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "fluxors" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "widget_id" integer, "name" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "articles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "content" varchar(255), "abstract" varchar(255), "file_upload" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "books" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "authorships" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "book_id" integer, "person_id" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "people" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "time_zone" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "songs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "length" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "posts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "content" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "animals" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "species" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "documents" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "legacy_widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "version" integer) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "translations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "headline" varchar(255), "content" varchar(255), "language_code" varchar(255), "type" varchar(255)) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20110208155312"]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------
ControllerTest: test_controller_metadata_methods_should_get_evaluated_if_paper_trail_is_enabled_for_controller
--------------------------------------------------------------------------------------------------------------
Processing by WidgetsController#create as HTML
  Parameters: {"widget"=>{"name"=>"Flugel"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (49.8ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "Flugel"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "ip", "item_id", "item_type", "object_changes", "user_agent", "whodunnit") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["ip", "127.0.0.1"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Flugel\ncreated_at:\n- \n- 2014-01-10 21:02:39.438501000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.438501000 Z\nid:\n- \n- 1\n"], ["user_agent", "User-Agent"], ["whodunnit", 153]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 113ms (ActiveRecord: 50.7ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------
ControllerTest: test_controller_metadata_methods_should_not_get_evaluated_if_paper_trail_is_disabled_for_controller
-------------------------------------------------------------------------------------------------------------------
Processing by WidgetsController#create as HTML
  Parameters: {"widget"=>{"name"=>"Flugel"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "Flugel"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (ActiveRecord: 0.4ms)
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------
ControllerTest: test_create
---------------------------
Processing by WidgetsController#create as HTML
  Parameters: {"widget"=>{"name"=>"Flugel"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "Flugel"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "ip", "item_id", "item_type", "object_changes", "user_agent", "whodunnit") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["ip", "127.0.0.1"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Flugel\ncreated_at:\n- \n- 2014-01-10 21:02:39.550980000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.550980000 Z\nid:\n- \n- 1\n"], ["user_agent", "Rails Testing"], ["whodunnit", 153]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (ActiveRecord: 0.7ms)
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------
ControllerTest: test_destroy
----------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "Roundel"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Roundel\ncreated_at:\n- \n- 2014-01-10 21:02:39.558566000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.558566000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
Processing by WidgetsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mWidget Load (0.1ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "widgets" WHERE "widgets"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "ip", "item_id", "item_type", "object", "user_agent", "whodunnit") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "destroy"], ["ip", "127.0.0.1"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Roundel\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.558566000 Z\nupdated_at: 2014-01-10 21:02:39.558566000 Z\nsacrificial_column: \ntype: \n"], ["user_agent", "Rails Testing"], ["whodunnit", 153]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 5ms (ActiveRecord: 0.8ms)
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
ControllerTest: test_disable_on_create
--------------------------------------
Processing by WidgetsController#create as HTML
  Parameters: {"widget"=>{"name"=>"Flugel"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "Flugel"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 2ms (ActiveRecord: 0.4ms)
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------
ControllerTest: test_disable_on_destroy
---------------------------------------
Processing by WidgetsController#create as HTML
  Parameters: {"widget"=>{"name"=>"Flugel"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "Flugel"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 2ms (ActiveRecord: 0.5ms)
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
Processing by WidgetsController#destroy as HTML
  Parameters: {"widget"=>{"name"=>"Flugel"}}
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "widgets" WHERE "widgets"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
ControllerTest: test_disable_on_update
--------------------------------------
Processing by WidgetsController#create as HTML
  Parameters: {"widget"=>{"name"=>"Flugel"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "Flugel"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 2ms (ActiveRecord: 0.4ms)
  [1m[35mPaperTrail::Version Load (0.0ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
Processing by WidgetsController#update as HTML
  Parameters: {"widget"=>{"name"=>"Flugel"}}
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Bugle"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 2ms (ActiveRecord: 0.4ms)
  [1m[36mPaperTrail::Version Load (0.0ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------
ControllerTest: test_update
---------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "Duvel"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Duvel\ncreated_at:\n- \n- 2014-01-10 21:02:39.592997000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.592997000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
Processing by WidgetsController#update as HTML
  Parameters: {"widget"=>{"name"=>"Bugle"}, "id"=>"1"}
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Bugle"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "ip", "item_id", "item_type", "object", "object_changes", "user_agent", "whodunnit") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["ip", "127.0.0.1"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Duvel\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.592997000 Z\nupdated_at: 2014-01-10 21:02:39.592997000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Duvel\n- Bugle\nupdated_at:\n- 2014-01-10 21:02:39.592997000 Z\n- 2014-01-10 21:02:39.598185000 Z\n"], ["user_agent", "Rails Testing"], ["whodunnit", 153]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 4ms (ActiveRecord: 0.5ms)
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------
EnabledForControllerTest: test: `PaperTrail.enabled? == false` should enabled_for_controller?.should == false. 
---------------------------------------------------------------------------------------------------------------
Processing by ArticlesController#create as HTML
  Parameters: {"article"=>{"title"=>"Doh", "content"=>"Sit nesciunt fugiat quos consequatur."}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("content", "title") VALUES (?, ?)  [["content", "Sit nesciunt fugiat quos consequatur."], ["title", "Doh"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (ActiveRecord: 0.8ms)
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------
EnabledForControllerTest: test: `PaperTrail.enabled? == true` should enabled_for_controller?.should == true. 
-------------------------------------------------------------------------------------------------------------
Processing by ArticlesController#create as HTML
  Parameters: {"article"=>{"title"=>"Doh", "content"=>"Voluptatum fuga inventore assumenda suscipit delectus architecto."}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("content", "title") VALUES (?, ?)  [["content", "Voluptatum fuga inventore assumenda suscipit delectus architecto."], ["title", "Doh"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "ip", "item_id", "item_type", "object_changes", "question", "user_agent", "whodunnit") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144352244320"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["ip", "0.0.0.0"], ["item_id", 1], ["item_type", "Article"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Voluptatum fuga inventore assumenda suscipit delectus architecto.\n"], ["question", "31 + 11 = 42"], ["user_agent", "Rails Testing"], ["whodunnit", 153]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 200 OK in 4ms (ActiveRecord: 0.6ms)
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: :has_many :through should store version on join clear. 
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "War and Peace"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Book"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntitle:\n- \n- War and Peace\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("name", "time_zone") VALUES (?, ?)[0m  [["name", "Dostoyevsky"], ["time_zone", nil]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- \nname:\n- \n- Dostoyevsky\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "people" ("name", "time_zone") VALUES (?, ?)[0m  [["name", "Solzhenitsyn"], ["time_zone", nil]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- \nname:\n- \n- Solzhenitsyn\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "authorships" ("book_id", "person_id") VALUES (?, ?)[0m  [["book_id", 1], ["person_id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Authorship"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nbook_id:\n- \n- 1\nperson_id:\n- \n- 1\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36mAuthorship Load (0.1ms)[0m  [1mSELECT "authorships".* FROM "authorships" WHERE "authorships"."book_id" = ?[0m  [["book_id", 1]]
In Rails 4.1 delete_all on associations would not fire callbacks. It means if the :dependent option is :destroy then the associated records would be deleted without loading and invoking callbacks.
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "authorships" WHERE "authorships"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Authorship"], ["object", "---\nid: 1\nbook_id: 1\nperson_id: 1\n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Authorship"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36mAuthorship Load (0.1ms)[0m  [1mSELECT "authorships".* FROM "authorships" WHERE "authorships"."id" = ? ORDER BY "authorships"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mBook Load (0.1ms)[0m  SELECT "books".* FROM "books" WHERE "books"."id" = ? ORDER BY "books"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mAuthorship Load (0.0ms)[0m  SELECT "authorships".* FROM "authorships" WHERE "authorships"."id" = ? ORDER BY "authorships"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPerson Load (0.1ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = ? ORDER BY "people"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: :has_many :through should store version on join destroy. 
---------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "War and Peace"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Book"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntitle:\n- \n- War and Peace\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("name", "time_zone") VALUES (?, ?)[0m  [["name", "Dostoyevsky"], ["time_zone", nil]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- \nname:\n- \n- Dostoyevsky\nid:\n- \n- 1\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "people" ("name", "time_zone") VALUES (?, ?)[0m  [["name", "Solzhenitsyn"], ["time_zone", nil]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- \nname:\n- \n- Solzhenitsyn\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "authorships" ("book_id", "person_id") VALUES (?, ?)[0m  [["book_id", 1], ["person_id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Authorship"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nbook_id:\n- \n- 1\nperson_id:\n- \n- 1\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36mAuthorship Load (0.0ms)[0m  [1mSELECT "authorships".* FROM "authorships" WHERE "authorships"."book_id" = ?[0m  [["book_id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "authorships" WHERE "authorships"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Authorship"], ["object", "---\nid: 1\nbook_id: 1\nperson_id: 1\n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Authorship"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36mAuthorship Load (0.0ms)[0m  [1mSELECT "authorships".* FROM "authorships" WHERE "authorships"."id" = ? ORDER BY "authorships"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mBook Load (0.0ms)[0m  SELECT "books".* FROM "books" WHERE "books"."id" = ? ORDER BY "books"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mAuthorship Load (0.0ms)[0m  SELECT "authorships".* FROM "authorships" WHERE "authorships"."id" = ? ORDER BY "authorships"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPerson Load (0.0ms)[0m  [1mSELECT "people".* FROM "people" WHERE "people"."id" = ? ORDER BY "people"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: :has_many :through should store version on source <<. 
------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "books" ("title") VALUES (?)[0m  [["title", "War and Peace"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Book"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntitle:\n- \n- War and Peace\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("name", "time_zone") VALUES (?, ?)[0m  [["name", "Dostoyevsky"], ["time_zone", nil]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- \nname:\n- \n- Dostoyevsky\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "people" ("name", "time_zone") VALUES (?, ?)[0m  [["name", "Solzhenitsyn"], ["time_zone", nil]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- \nname:\n- \n- Solzhenitsyn\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "authorships" ("book_id", "person_id") VALUES (?, ?)  [["book_id", 1], ["person_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Authorship"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nbook_id:\n- \n- 1\nperson_id:\n- \n- 1\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36mAuthorship Load (0.1ms)[0m  [1mSELECT "authorships".* FROM "authorships" WHERE "authorships"."book_id" = ? ORDER BY "authorships"."id" ASC LIMIT 1[0m  [["book_id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Authorship"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: :has_many :through should store version on source create. 
----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "books" ("title") VALUES (?)  [["title", "War and Peace"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Book"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntitle:\n- \n- War and Peace\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("name", "time_zone") VALUES (?, ?)  [["name", "Dostoyevsky"], ["time_zone", nil]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- \nname:\n- \n- Dostoyevsky\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "people" ("name", "time_zone") VALUES (?, ?)  [["name", "Solzhenitsyn"], ["time_zone", nil]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- \nname:\n- \n- Solzhenitsyn\nid:\n- \n- 2\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "people" ("name", "time_zone") VALUES (?, ?)[0m  [["name", "Tolstoy"], ["time_zone", nil]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- \nname:\n- \n- Tolstoy\nid:\n- \n- 3\n"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "authorships" ("book_id", "person_id") VALUES (?, ?)[0m  [["book_id", 1], ["person_id", 3]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Authorship"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nbook_id:\n- \n- 1\nperson_id:\n- \n- 3\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36mPerson Load (0.1ms)[0m  [1mSELECT "people".* FROM "people" ORDER BY "people"."id" DESC LIMIT 1[0m
  [1m[35mAuthorship Load (0.1ms)[0m  SELECT "authorships".* FROM "authorships" ORDER BY "authorships"."id" DESC LIMIT 1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions"[0m
  [1m[35mPerson Load (0.0ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = ? ORDER BY "people"."id" ASC LIMIT 1  [["id", 3]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mAuthorship Load (0.0ms)[0m  SELECT "authorships".* FROM "authorships" WHERE "authorships"."id" = ? ORDER BY "authorships"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with a custom association should create a new version record. 
----------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "documents" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Document"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "documents" SET "name" = ? WHERE "documents"."id" = 1  [["name", "Doc 1"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Document"], ["object", "---\nid: 1\nname: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Doc 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Document"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with a custom association should not respond to versions method. 
-------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" DEFAULT VALUES[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Document"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "documents" SET "name" = ? WHERE "documents"."id" = 1[0m  [["name", "Doc 1"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Document"], ["object", "---\nid: 1\nname: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Doc 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with a custom association should respond to `next_version` as normal. 
------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" DEFAULT VALUES[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Document"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "documents" SET "name" = ? WHERE "documents"."id" = 1[0m  [["name", "Doc 1"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Document"], ["object", "---\nid: 1\nname: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Doc 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Document"]]
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ? ORDER BY "documents"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Document' AND "versions"."item_id" = 1 AND (versions.created_at > '2014-01-10 21:02:39.781411') ORDER BY versions.created_at ASC LIMIT 1
  [1m[36mDocument Load (0.1ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with a custom association should respond to `previous_version` as normal. 
----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Document"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "documents" SET "name" = ? WHERE "documents"."id" = 1[0m  [["name", "Doc 1"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Document"], ["object", "---\nid: 1\nname: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Doc 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "documents" SET "name" = ? WHERE "documents"."id" = 1[0m  [["name", "Doc 2"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Document"], ["object", "---\nid: 1\nname: Doc 1\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Doc 1\n- Doc 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Document"]]
  [1m[36mDocument Load (0.0ms)[0m  [1mSELECT "documents".* FROM "documents" WHERE "documents"."id" = ? ORDER BY "documents"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (17.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with a has_one association before the associated was created when reified should see the associated as it was at the time. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "widget_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- widget_0\ncreated_at:\n- \n- 2014-01-10 21:02:39.817450000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.817450000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "widget_1"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: widget_0\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.817450000 Z\nupdated_at: 2014-01-10 21:02:39.817450000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- widget_0\n- widget_1\nupdated_at:\n- 2014-01-10 21:02:39.817450000 Z\n- 2014-01-10 21:02:39.820390000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "wotsits" ("created_at", "name", "updated_at", "widget_id") VALUES (?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "wotsit_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["widget_id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Wotsit"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- wotsit_0\nwidget_id:\n- \n- 1\ncreated_at:\n- \n- 2014-01-10 21:02:39.831553000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.831553000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWotsit Load (0.1ms)[0m  SELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1  [["widget_id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.1ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mWotsit Load (0.0ms)[0m  [1mSELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1[0m  [["widget_id", 1]]
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-10 21:02:38.822150') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "wotsits" SET "widget_id" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1  [["widget_id", nil], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: 1\nname: wotsit_0\ncreated_at: 2014-01-10 21:02:39.831553000 Z\nupdated_at: 2014-01-10 21:02:39.831553000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nwidget_id:\n- 1\n- \nupdated_at:\n- 2014-01-10 21:02:39.831553000 Z\n- 2014-01-10 21:02:39.842476000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with a has_one association where the association is created between model versions and then the associated is destroyed between model versions when reified should see the associated as it was at the time. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "widget_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- widget_0\ncreated_at:\n- \n- 2014-01-10 21:02:39.846999000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.846999000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "wotsits" ("created_at", "name", "updated_at", "widget_id") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "wotsit_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["widget_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Wotsit"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- wotsit_0\nwidget_id:\n- \n- 1\ncreated_at:\n- \n- 2014-01-10 21:02:39.850037000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.850037000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWotsit Load (0.0ms)[0m  [1mSELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1[0m  [["widget_id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Fri, 10 Jan 2014 21:02:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "widget_1"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: widget_0\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.846999000 Z\nupdated_at: 2014-01-10 21:02:39.846999000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- widget_0\n- widget_1\nupdated_at:\n- 2014-01-10 21:02:39.846999000 Z\n- 2014-01-10 21:02:39.855036000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "wotsits" WHERE "wotsits"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: 1\nname: wotsit_0\ncreated_at: 2014-01-10 21:02:39.850037000 Z\nupdated_at: 2014-01-10 21:02:39.850037000 Z\n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 4  [["created_at", Fri, 10 Jan 2014 21:02:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "widget_3"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: widget_1\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.846999000 Z\nupdated_at: 2014-01-10 21:02:39.855036000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- widget_1\n- widget_3\nupdated_at:\n- 2014-01-10 21:02:39.855036000 Z\n- 2014-01-10 21:02:39.861785000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mWotsit Load (0.0ms)[0m  SELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1  [["widget_id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with a has_one association where the association is created between model versions and then the associated is updated between model versions when reified opting out of has_one reification should see the associated as it is live. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "widget_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- widget_0\ncreated_at:\n- \n- 2014-01-10 21:02:39.870085000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.870085000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "wotsits" ("created_at", "name", "updated_at", "widget_id") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "wotsit_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["widget_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Wotsit"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- wotsit_0\nwidget_id:\n- \n- 1\ncreated_at:\n- \n- 2014-01-10 21:02:39.873332000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.873332000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWotsit Load (0.0ms)[0m  [1mSELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1[0m  [["widget_id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Fri, 10 Jan 2014 21:02:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "widget_1"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: widget_0\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.870085000 Z\nupdated_at: 2014-01-10 21:02:39.870085000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- widget_0\n- widget_1\nupdated_at:\n- 2014-01-10 21:02:39.870085000 Z\n- 2014-01-10 21:02:39.877975000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "wotsits" SET "name" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1[0m  [["name", "wotsit_1"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: 1\nname: wotsit_0\ncreated_at: 2014-01-10 21:02:39.873332000 Z\nupdated_at: 2014-01-10 21:02:39.873332000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- wotsit_0\n- wotsit_1\nupdated_at:\n- 2014-01-10 21:02:39.873332000 Z\n- 2014-01-10 21:02:39.881115000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 4  [["created_at", Fri, 10 Jan 2014 21:02:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "wotsits" SET "name" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1[0m  [["name", "wotsit_2"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: 1\nname: wotsit_1\ncreated_at: 2014-01-10 21:02:39.873332000 Z\nupdated_at: 2014-01-10 21:02:39.881115000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- wotsit_1\n- wotsit_2\nupdated_at:\n- 2014-01-10 21:02:39.881115000 Z\n- 2014-01-10 21:02:39.885350000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 5  [["created_at", Fri, 10 Jan 2014 21:02:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "widget_2"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: widget_1\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.870085000 Z\nupdated_at: 2014-01-10 21:02:39.877975000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- widget_1\n- widget_2\nupdated_at:\n- 2014-01-10 21:02:39.877975000 Z\n- 2014-01-10 21:02:39.889841000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "wotsits" SET "name" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1[0m  [["name", "wotsit_3"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: 1\nname: wotsit_2\ncreated_at: 2014-01-10 21:02:39.873332000 Z\nupdated_at: 2014-01-10 21:02:39.885350000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- wotsit_2\n- wotsit_3\nupdated_at:\n- 2014-01-10 21:02:39.885350000 Z\n- 2014-01-10 21:02:39.892849000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.1ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mWotsit Load (0.1ms)[0m  SELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1  [["widget_id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with a has_one association where the association is created between model versions and then the associated is updated between model versions when reified should see the associated as it was at the time. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "widget_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- widget_0\ncreated_at:\n- \n- 2014-01-10 21:02:39.900409000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.900409000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "wotsits" ("created_at", "name", "updated_at", "widget_id") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "wotsit_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["widget_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Wotsit"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- wotsit_0\nwidget_id:\n- \n- 1\ncreated_at:\n- \n- 2014-01-10 21:02:39.904379000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.904379000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWotsit Load (0.0ms)[0m  [1mSELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1[0m  [["widget_id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Fri, 10 Jan 2014 21:02:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "widget_1"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: widget_0\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.900409000 Z\nupdated_at: 2014-01-10 21:02:39.900409000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- widget_0\n- widget_1\nupdated_at:\n- 2014-01-10 21:02:39.900409000 Z\n- 2014-01-10 21:02:39.910125000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "wotsits" SET "name" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1[0m  [["name", "wotsit_1"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: 1\nname: wotsit_0\ncreated_at: 2014-01-10 21:02:39.904379000 Z\nupdated_at: 2014-01-10 21:02:39.904379000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- wotsit_0\n- wotsit_1\nupdated_at:\n- 2014-01-10 21:02:39.904379000 Z\n- 2014-01-10 21:02:39.913411000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 4  [["created_at", Fri, 10 Jan 2014 21:02:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "wotsits" SET "name" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1[0m  [["name", "wotsit_2"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: 1\nname: wotsit_1\ncreated_at: 2014-01-10 21:02:39.904379000 Z\nupdated_at: 2014-01-10 21:02:39.913411000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- wotsit_1\n- wotsit_2\nupdated_at:\n- 2014-01-10 21:02:39.913411000 Z\n- 2014-01-10 21:02:39.917566000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 5  [["created_at", Fri, 10 Jan 2014 21:02:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "widget_2"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: widget_1\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.900409000 Z\nupdated_at: 2014-01-10 21:02:39.910125000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- widget_1\n- widget_2\nupdated_at:\n- 2014-01-10 21:02:39.910125000 Z\n- 2014-01-10 21:02:39.921819000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "wotsits" SET "name" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1[0m  [["name", "wotsit_3"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: 1\nname: wotsit_2\ncreated_at: 2014-01-10 21:02:39.904379000 Z\nupdated_at: 2014-01-10 21:02:39.917566000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- wotsit_2\n- wotsit_3\nupdated_at:\n- 2014-01-10 21:02:39.917566000 Z\n- 2014-01-10 21:02:39.924736000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mWotsit Load (0.0ms)[0m  SELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1  [["widget_id", 1]]
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-10 21:02:38.923822') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[35mWotsit Load (0.1ms)[0m  SELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with a has_one association where the association is created between model versions when reified should see the associated as it was at the time. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "widget_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- widget_0\ncreated_at:\n- \n- 2014-01-10 21:02:39.935614000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.935614000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "wotsits" ("created_at", "name", "updated_at", "widget_id") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["name", "wotsit_0"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["widget_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Wotsit"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- wotsit_0\nwidget_id:\n- \n- 1\ncreated_at:\n- \n- 2014-01-10 21:02:39.963947000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:39.963947000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWotsit Load (0.0ms)[0m  [1mSELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1[0m  [["widget_id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Fri, 10 Jan 2014 21:02:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "widget_1"], ["updated_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: widget_0\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:39.935614000 Z\nupdated_at: 2014-01-10 21:02:39.935614000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- widget_0\n- widget_1\nupdated_at:\n- 2014-01-10 21:02:39.935614000 Z\n- 2014-01-10 21:02:39.969084000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mWotsit Load (0.0ms)[0m  SELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1  [["widget_id", 1]]
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-10 21:02:38.971136') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with column version and custom version_method should allow version updates. 
------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "legacy_widgets" ("name", "version") VALUES (?, ?)[0m  [["name", "foo"], ["version", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- foo\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "legacy_widgets" SET "version" = ? WHERE "legacy_widgets"."id" = 1[0m  [["version", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with column version and custom version_method should create a new version record. 
------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "legacy_widgets" ("name", "version") VALUES (?, ?)  [["name", "foo"], ["version", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- foo\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "LegacyWidget"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A model with column version and custom version_method should set version on create. 
------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "legacy_widgets" ("name", "version") VALUES (?, ?)[0m  [["name", "foo"], ["version", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:39 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- foo\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new model instance which uses a custom PaperTrail::Version class which is then saved should change the number of post versions. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Post"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "post_versions"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new model instance which uses a custom PaperTrail::Version class which is then saved should not change the number of versions. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type") VALUES (?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Post"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------
HasPaperTrailModelTest: test: A new record should be live. 
-----------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record should not have any previous versions. 
----------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes and has many associated objects should copy the has_many associations when reifying. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.018109000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.018109000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.018109000 Z\nupdated_at: 2014-01-10 21:02:40.018109000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.018109000 Z\n- 2014-01-10 21:02:40.021904000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "fluxors" ("name", "widget_id") VALUES (?, ?)[0m  [["name", "f-zero"], ["widget_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "fluxors" ("name", "widget_id") VALUES (?, ?)  [["name", "f-one"], ["widget_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mFluxor Load (0.1ms)[0m  SELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."widget_id" = ? ORDER BY "fluxors"."name" ASC  [["widget_id", 1]]
  [1m[36mFluxor Load (0.1ms)[0m  [1mSELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."widget_id" = ? ORDER BY "fluxors"."name" ASC[0m  [["widget_id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes and has one associated object should copy the has_one association when reifying with :has_one => true. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.040886000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.040886000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.040886000 Z\nupdated_at: 2014-01-10 21:02:40.040886000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.040886000 Z\n- 2014-01-10 21:02:40.044268000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "wotsits" ("created_at", "name", "updated_at", "widget_id") VALUES (?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "John"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["widget_id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Wotsit"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- John\nwidget_id:\n- \n- 1\ncreated_at:\n- \n- 2014-01-10 21:02:40.047406000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.047406000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mWotsit Load (0.0ms)[0m  SELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1  [["widget_id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mWotsit Load (0.0ms)[0m  [1mSELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1[0m  [["widget_id", 1]]
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-10 21:02:37.046149') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "wotsits" SET "widget_id" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1  [["widget_id", nil], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: 1\nname: John\ncreated_at: 2014-01-10 21:02:40.047406000 Z\nupdated_at: 2014-01-10 21:02:40.047406000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nwidget_id:\n- 1\n- \nupdated_at:\n- 2014-01-10 21:02:40.047406000 Z\n- 2014-01-10 21:02:40.054924000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes and has one associated object should not copy the has_one association by default when reifying. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.058955000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.058955000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.058955000 Z\nupdated_at: 2014-01-10 21:02:40.058955000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.058955000 Z\n- 2014-01-10 21:02:40.061911000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "wotsits" ("created_at", "name", "updated_at", "widget_id") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "John"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["widget_id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Wotsit"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- John\nwidget_id:\n- \n- 1\ncreated_at:\n- \n- 2014-01-10 21:02:40.064753000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.064753000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWotsit Load (0.0ms)[0m  [1mSELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1[0m  [["widget_id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.1ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mWotsit Load (0.1ms)[0m  SELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."widget_id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1  [["widget_id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes and then destroyed should be available in its previous version. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.074457000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.074457000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.074457000 Z\nupdated_at: 2014-01-10 21:02:40.074457000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.074457000 Z\n- 2014-01-10 21:02:40.078225000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "fluxors" ("name", "widget_id") VALUES (?, ?)  [["name", "flux"], ["widget_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "widgets" WHERE "widgets"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Harry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.074457000 Z\nupdated_at: 2014-01-10 21:02:40.078225000 Z\nsacrificial_column: \ntype: \n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes and then destroyed should be re-creatable from its previous version. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.089937000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.089937000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.089937000 Z\nupdated_at: 2014-01-10 21:02:40.089937000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.089937000 Z\n- 2014-01-10 21:02:40.093145000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "fluxors" ("name", "widget_id") VALUES (?, ?)  [["name", "flux"], ["widget_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "widgets" WHERE "widgets"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Harry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.089937000 Z\nupdated_at: 2014-01-10 21:02:40.093145000 Z\nsacrificial_column: \ntype: \n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mWidget Load (0.1ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "widgets" ("created_at", "id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["id", 1], ["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\nname:\n- \n- Harry\ncreated_at:\n- \n- 2014-01-10 21:02:40.089937000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.093145000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes and then destroyed should have three previous versions. 
-------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.108183000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.108183000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.108183000 Z\nupdated_at: 2014-01-10 21:02:40.108183000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.108183000 Z\n- 2014-01-10 21:02:40.111367000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "fluxors" ("name", "widget_id") VALUES (?, ?)  [["name", "flux"], ["widget_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "widgets" WHERE "widgets"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Harry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.108183000 Z\nupdated_at: 2014-01-10 21:02:40.111367000 Z\nsacrificial_column: \ntype: \n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mWidget Load (0.1ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes and then destroyed should not have changes. 
-------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.124075000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.124075000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.124075000 Z\nupdated_at: 2014-01-10 21:02:40.124075000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.124075000 Z\n- 2014-01-10 21:02:40.127193000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (17.4ms)[0m  [1mINSERT INTO "fluxors" ("name", "widget_id") VALUES (?, ?)[0m  [["name", "flux"], ["widget_id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "widgets" WHERE "widgets"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Harry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.124075000 Z\nupdated_at: 2014-01-10 21:02:40.127193000 Z\nsacrificial_column: \ntype: \n"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (91.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes and then destroyed should record the correct event. 
---------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.247390000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.247390000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.247390000 Z\nupdated_at: 2014-01-10 21:02:40.247390000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.247390000 Z\n- 2014-01-10 21:02:40.251478000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "fluxors" ("name", "widget_id") VALUES (?, ?)[0m  [["name", "flux"], ["widget_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "widgets" WHERE "widgets"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Harry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.247390000 Z\nupdated_at: 2014-01-10 21:02:40.251478000 Z\nsacrificial_column: \ntype: \n"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36m (46.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes and then destroyed should restore its associations on its previous version. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.310004000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.310004000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.310004000 Z\nupdated_at: 2014-01-10 21:02:40.310004000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.310004000 Z\n- 2014-01-10 21:02:40.314009000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "fluxors" ("name", "widget_id") VALUES (?, ?)  [["name", "flux"], ["widget_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "widgets" WHERE "widgets"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Harry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.310004000 Z\nupdated_at: 2014-01-10 21:02:40.314009000 Z\nsacrificial_column: \ntype: \n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "widgets" ("created_at", "id", "name", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["id", 1], ["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\nname:\n- \n- Harry\ncreated_at:\n- \n- 2014-01-10 21:02:40.310004000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.314009000 Z\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mFluxor Load (0.0ms)[0m  [1mSELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."widget_id" = ? ORDER BY "fluxors"."name" ASC[0m  [["widget_id", 1]]
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes should be available in its previous version. 
--------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.356199000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.356199000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.356199000 Z\nupdated_at: 2014-01-10 21:02:40.356199000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.356199000 Z\n- 2014-01-10 21:02:40.359199000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes should have stored changes. 
---------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.366736000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.366736000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.366736000 Z\nupdated_at: 2014-01-10 21:02:40.366736000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.366736000 Z\n- 2014-01-10 21:02:40.369474000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes should have the same ID in its previous version. 
------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.377223000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.377223000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.377223000 Z\nupdated_at: 2014-01-10 21:02:40.377223000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.377223000 Z\n- 2014-01-10 21:02:40.379983000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes should have two previous versions. 
----------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.387333000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.387333000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.387333000 Z\nupdated_at: 2014-01-10 21:02:40.387333000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.387333000 Z\n- 2014-01-10 21:02:40.390317000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes should have versions that are not live. 
---------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.395640000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.395640000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.395640000 Z\nupdated_at: 2014-01-10 21:02:40.395640000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.395640000 Z\n- 2014-01-10 21:02:40.398882000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes should record the correct event. 
--------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.406733000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.406733000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.406733000 Z\nupdated_at: 2014-01-10 21:02:40.406733000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.406733000 Z\n- 2014-01-10 21:02:40.409703000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated with changes should return changes with indifferent access. 
----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.414394000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.414394000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Harry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.414394000 Z\nupdated_at: 2014-01-10 21:02:40.414394000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Harry\nupdated_at:\n- 2014-01-10 21:02:40.414394000 Z\n- 2014-01-10 21:02:40.416953000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created and then updated without any changes should not have a new version. 
-------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.424755000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.424755000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "updated_at" = '2014-01-10 21:02:40.427321' WHERE "widgets"."id" = 1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created should be live. 
---------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.431340000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.431340000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created should be nil in its previous version. 
--------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.436586000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.436586000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created should have changes. 
--------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.442544000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.442544000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created should have one previous version. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.449046000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.449046000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A new record which is then created should record the correct event. 
--------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:40.453905000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.453905000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A non-reified item should not have a next version. 
---------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A non-reified item should not have a previous version. 
-------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A non-reified item with versions should have a previous version. 
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncreated_at:\n- \n- 2014-01-10 21:02:40.459949000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.459949000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Tom"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: \na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.459949000 Z\nupdated_at: 2014-01-10 21:02:40.459949000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Tom\nupdated_at:\n- 2014-01-10 21:02:40.459949000 Z\n- 2014-01-10 21:02:40.462752000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Dick"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Tom\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.459949000 Z\nupdated_at: 2014-01-10 21:02:40.462752000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Tom\n- Dick\nupdated_at:\n- 2014-01-10 21:02:40.462752000 Z\n- 2014-01-10 21:02:40.465491000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Jane"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Dick\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.459949000 Z\nupdated_at: 2014-01-10 21:02:40.465491000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dick\n- Jane\nupdated_at:\n- 2014-01-10 21:02:40.465491000 Z\n- 2014-01-10 21:02:40.468247000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A non-reified item with versions should not have a next version. 
-----------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncreated_at:\n- \n- 2014-01-10 21:02:40.478461000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.478461000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Tom"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: \na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.478461000 Z\nupdated_at: 2014-01-10 21:02:40.478461000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Tom\nupdated_at:\n- 2014-01-10 21:02:40.478461000 Z\n- 2014-01-10 21:02:40.481288000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Dick"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Tom\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.478461000 Z\nupdated_at: 2014-01-10 21:02:40.481288000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Tom\n- Dick\nupdated_at:\n- 2014-01-10 21:02:40.481288000 Z\n- 2014-01-10 21:02:40.483996000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Jane"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Dick\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.478461000 Z\nupdated_at: 2014-01-10 21:02:40.483996000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dick\n- Jane\nupdated_at:\n- 2014-01-10 21:02:40.483996000 Z\n- 2014-01-10 21:02:40.486737000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A papertrail with somebody making changes when a record is created should track who made the change. 
-----------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes", "whodunnit") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Fidget\ncreated_at:\n- \n- 2014-01-10 21:02:40.491075000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.491075000 Z\nid:\n- \n- 1\n"], ["whodunnit", "Alice"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:40.493107') ORDER BY versions.created_at DESC LIMIT 1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A papertrail with somebody making changes when a record is created when a record is updated should track who made the change. 
------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes", "whodunnit") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Fidget\ncreated_at:\n- \n- 2014-01-10 21:02:40.498100000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.498100000 Z\nid:\n- \n- 1\n"], ["whodunnit", "Alice"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Rivet"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes", "whodunnit") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.498100000 Z\nupdated_at: 2014-01-10 21:02:40.498100000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Rivet\nupdated_at:\n- 2014-01-10 21:02:40.498100000 Z\n- 2014-01-10 21:02:40.501923000 Z\n"], ["whodunnit", "Bob"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:40.503924') ORDER BY versions.created_at DESC LIMIT 1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A papertrail with somebody making changes when a record is created when a record is updated when a record is destroyed should track who made the change. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes", "whodunnit") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Fidget\ncreated_at:\n- \n- 2014-01-10 21:02:40.508145000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.508145000 Z\nid:\n- \n- 1\n"], ["whodunnit", "Alice"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Rivet"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes", "whodunnit") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.508145000 Z\nupdated_at: 2014-01-10 21:02:40.508145000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Rivet\nupdated_at:\n- 2014-01-10 21:02:40.508145000 Z\n- 2014-01-10 21:02:40.511760000 Z\n"], ["whodunnit", "Bob"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "widgets" WHERE "widgets"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "whodunnit") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Rivet\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.508145000 Z\nupdated_at: 2014-01-10 21:02:40.511760000 Z\nsacrificial_column: \ntype: \n"], ["whodunnit", "Charlie"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:40.516576') ORDER BY versions.created_at DESC LIMIT 1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with PaperTrail globally disabled when updated should not add to its trail. 
-------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Zaphod"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Zaphod\ncreated_at:\n- \n- 2014-01-10 21:02:40.521128000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.521128000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Beeblebrox"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for US translations that are drafts after update should not change the number of versions. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "translations" ("headline", "language_code", "type") VALUES (?, ?, ?)  [["headline", "Headline"], ["language_code", "US"], ["type", "DRAFT"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "translations" SET "content" = ? WHERE "translations"."id" = 1[0m  [["content", "Content"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for US translations that are drafts should not change the number of versions. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "translations" ("headline", "language_code", "type") VALUES (?, ?, ?)[0m  [["headline", "Headline"], ["language_code", "US"], ["type", "DRAFT"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for US translations that are not drafts after destroy should change the number of versions. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "translations" ("headline", "language_code") VALUES (?, ?)[0m  [["headline", "Headline"], ["language_code", "US"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Translation"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nheadline:\n- \n- Headline\nlanguage_code:\n- \n- US\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "translations" WHERE "translations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Translation"], ["object", "---\nid: 1\nheadline: Headline\ncontent: \nlanguage_code: US\ntype: \n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Translation"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for US translations that are not drafts after destroy should show the new version in the model's `versions` association. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "translations" ("headline", "language_code") VALUES (?, ?)[0m  [["headline", "Headline"], ["language_code", "US"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Translation"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nheadline:\n- \n- Headline\nlanguage_code:\n- \n- US\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "translations" WHERE "translations"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Translation"], ["object", "---\nid: 1\nheadline: Headline\ncontent: \nlanguage_code: US\ntype: \n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Translation"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for US translations that are not drafts after update should change the number of versions. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "translations" ("headline", "language_code") VALUES (?, ?)  [["headline", "Headline"], ["language_code", "US"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Translation"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nheadline:\n- \n- Headline\nlanguage_code:\n- \n- US\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "translations" SET "content" = ? WHERE "translations"."id" = 1  [["content", "Content"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Translation"], ["object", "---\nid: 1\nheadline: Headline\ncontent: \nlanguage_code: US\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Content\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for US translations that are not drafts after update should show the new version in the model's `versions` association. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "translations" ("headline", "language_code") VALUES (?, ?)[0m  [["headline", "Headline"], ["language_code", "US"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Translation"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nheadline:\n- \n- Headline\nlanguage_code:\n- \n- US\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "translations" SET "content" = ? WHERE "translations"."id" = 1[0m  [["content", "Content"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Translation"], ["object", "---\nid: 1\nheadline: Headline\ncontent: \nlanguage_code: US\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Content\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 1], ["item_type", "Translation"]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for US translations that are not drafts should change the number of versions. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "translations" ("headline", "language_code") VALUES (?, ?)  [["headline", "Headline"], ["language_code", "US"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Translation"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nheadline:\n- \n- Headline\nlanguage_code:\n- \n- US\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for non-US translations after destroy should not change the number of versions. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "translations" ("headline") VALUES (?)[0m  [["headline", "Headline"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "translations" WHERE "translations"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for non-US translations after update should not change the number of versions. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "translations" ("headline") VALUES (?)  [["headline", "Headline"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "translations" SET "content" = ? WHERE "translations"."id" = 1[0m  [["content", "Content"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined "if" and "unless" attributes for non-US translations should not change the number of versions. 
---------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "translations" ("headline") VALUES (?)[0m  [["headline", "Headline"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'ignore' attribute which updates an ignored column should not change the number of versions. 
-------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "legacy_widgets" DEFAULT VALUES[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "legacy_widgets" SET "version" = ? WHERE "legacy_widgets"."id" = 1[0m  [["version", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes should creation should change the number of versions. 
-----------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144389937600"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which gets destroyed should change the number of versions. 
----------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144389190500"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "articles" WHERE "articles"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144389190500"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["question", "31 + 11 = 42"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which gets destroyed should show the new version in the model's `versions` association. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144349794320"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "articles" WHERE "articles"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144349794320"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["question", "31 + 11 = 42"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates a non-ignored and non-selected column should not change the number of versions. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144350177920"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "abstract" = ? WHERE "articles"."id" = 1[0m  [["abstract", "Other abstract"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates a selected column should change the number of versions. 
---------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144351783000"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "content" = ? WHERE "articles"."id" = 1[0m  [["content", "Some text here."]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144351783000"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates a selected column should show the new version in the model's `versions` association. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144351974760"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "content" = ? WHERE "articles"."id" = 1  [["content", "Some text here."]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144351974760"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates a skipped column and a selected column and when updated again should have kept the non-skipped attributes in the previous version. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144352807780"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "file_upload" = ?, "content" = ? WHERE "articles"."id" = 1[0m  [["file_upload", "Your data goes here"], ["content", "Some text here."]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144352807780"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "articles" SET "file_upload" = ?, "content" = ? WHERE "articles"."id" = 1[0m  [["file_upload", "More data goes here"], ["content", "More text here."]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144352807780"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: Some text here.\nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- Some text here.\n- More text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates a skipped column and a selected column and when updated again should have removed the skipped attributes when saving the previous version. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144386707800"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "file_upload" = ?, "content" = ? WHERE "articles"."id" = 1  [["file_upload", "Your data goes here"], ["content", "Some text here."]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144386707800"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "articles" SET "file_upload" = ?, "content" = ? WHERE "articles"."id" = 1  [["file_upload", "More data goes here"], ["content", "More text here."]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144386707800"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: Some text here.\nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- Some text here.\n- More text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates a skipped column and a selected column should change the number of versions. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144389597660"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "file_upload" = ?, "content" = ? WHERE "articles"."id" = 1[0m  [["file_upload", "Your data goes here"], ["content", "Some text here."]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144389597660"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates a skipped column and a selected column should have stored only non-skipped attributes. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144388228140"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "file_upload" = ?, "content" = ? WHERE "articles"."id" = 1  [["file_upload", "Your data goes here"], ["content", "Some text here."]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144388228140"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates a skipped column and a selected column should show the new version in the model's `versions` association. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144389026640"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "file_upload" = ?, "content" = ? WHERE "articles"."id" = 1[0m  [["file_upload", "Your data goes here"], ["content", "Some text here."]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144389026640"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates a skipped column should not change the number of versions. 
------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144388087840"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "file_upload" = ? WHERE "articles"."id" = 1  [["file_upload", "Your data goes here"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates an ignored column should not change the number of versions. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144388272140"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "title" = ? WHERE "articles"."id" = 1  [["title", "My first title"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates an ignored column with falsy Proc should change the number of versions. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144351557520"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "abstract" = ? WHERE "articles"."id" = 1  [["abstract", "do not ignore abstract!"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144351557520"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nabstract:\n- \n- do not ignore abstract!\n"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates an ignored column with truly Proc should not change the number of versions. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144387151900"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "abstract" = ? WHERE "articles"."id" = 1[0m  [["abstract", "ignore abstract"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates an ignored column, ignored with falsy Proc and a selected column should change the number of versions. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144387105700"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "articles" SET "title" = ?, "content" = ?, "abstract" = ? WHERE "articles"."id" = 1[0m  [["title", "My first title"], ["content", "Some text here."], ["abstract", "do not ignore abstract"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144387105700"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\nabstract:\n- \n- do not ignore abstract\n"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates an ignored column, ignored with falsy Proc and a selected column should have stored only non-ignored attributes. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144352207580"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "title" = ?, "content" = ?, "abstract" = ? WHERE "articles"."id" = 1  [["title", "My first title"], ["content", "Some text here."], ["abstract", "do not ignore abstract"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144352207580"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\nabstract:\n- \n- do not ignore abstract\n"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates an ignored column, ignored with falsy Proc and a selected column should show the new version in the model's `versions` association. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144387769800"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "title" = ?, "content" = ?, "abstract" = ? WHERE "articles"."id" = 1[0m  [["title", "My first title"], ["content", "Some text here."], ["abstract", "do not ignore abstract"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144387769800"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\nabstract:\n- \n- do not ignore abstract\n"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates an ignored column, ignored with truly Proc and a selected column should change the number of versions. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144387399100"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "title" = ?, "content" = ?, "abstract" = ? WHERE "articles"."id" = 1  [["title", "My first title"], ["content", "Some text here."], ["abstract", "ignore abstract"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144387399100"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates an ignored column, ignored with truly Proc and a selected column should have stored only non-ignored attributes. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" DEFAULT VALUES[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144387446040"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "title" = ?, "content" = ?, "abstract" = ? WHERE "articles"."id" = 1[0m  [["title", "My first title"], ["content", "Some text here."], ["abstract", "ignore abstract"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144387446040"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with defined 'only' and 'ignore' attributes which updates an ignored column, ignored with truly Proc and a selected column should show the new version in the model's `versions` association. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144387799640"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "title" = ?, "content" = ?, "abstract" = ? WHERE "articles"."id" = 1  [["title", "My first title"], ["content", "Some text here."], ["abstract", "ignore abstract"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144387799640"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: \ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Some text here.\n"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with its paper trail turned off and then its paper trail turned on when updated "without versioning" should enable paper trail after call. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Zaphod"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Zaphod\ncreated_at:\n- \n- 2014-01-10 21:02:40.751497000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.751497000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Ford"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with its paper trail turned off and then its paper trail turned on when updated "without versioning" should not create new version. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Zaphod"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Zaphod\ncreated_at:\n- \n- 2014-01-10 21:02:40.759585000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.759585000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Ford"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with its paper trail turned off and then its paper trail turned on when updated should add to its trail. 
------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Zaphod"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Zaphod\ncreated_at:\n- \n- 2014-01-10 21:02:40.766383000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.766383000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Ford"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Zaphod\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:40.766383000 Z\nupdated_at: 2014-01-10 21:02:40.766383000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Zaphod\n- Ford\nupdated_at:\n- 2014-01-10 21:02:40.766383000 Z\n- 2014-01-10 21:02:40.770293000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with its paper trail turned off when destroyed "without versioning" should leave paper trail off after call. 
----------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Zaphod"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Zaphod\ncreated_at:\n- \n- 2014-01-10 21:02:40.774580000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.774580000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "widgets" WHERE "widgets"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record with its paper trail turned off when updated should not add to its trail. 
-----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Zaphod"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Zaphod\ncreated_at:\n- \n- 2014-01-10 21:02:40.780691000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.780691000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Beeblebrox"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail after a column is removed from the record's schema should reify previous version. 
--------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["a_decimal", #<BigDecimal:7f9786c6cd00,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:40 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:40.787397000 -05:00\na_time:\n- \n- 2014-01-10 16:02:40.787427000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:40.788107000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.788107000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:40.787397000 -05:00\na_time: 2014-01-10 16:02:40.787427000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:40.788107000 Z\nupdated_at: 2014-01-10 21:02:40.788107000 Z\nsacrificial_column: \ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:40.787397000 -05:00\n- \na_time:\n- 2014-01-10 16:02:40.787427000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:40.788107000 Z\n- 2014-01-10 21:02:40.806260000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  CREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "widgets"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "awidgets" ("id","name","a_text","an_integer","a_float","a_decimal","a_datetime","a_time","a_date","a_boolean","created_at","updated_at","sacrificial_column","type") VALUES (1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'f', '2014-01-10 21:02:40.788107', '2014-01-10 21:02:40.806260', NULL, NULL)
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "widgets"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "awidgets"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "widgets" ("id","name","a_text","an_integer","a_float","a_decimal","a_datetime","a_time","a_date","a_boolean","created_at","updated_at","type") VALUES (1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'f', '2014-01-10 21:02:40.788107', '2014-01-10 21:02:40.806260', NULL)
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "awidgets"[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (15.0ms)[0m  [1mALTER TABLE "versions" ADD "custom_created_at" datetime[0m
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.1ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
Attribute sacrificial_column does not exist on Widget (Version id: 2).
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail after a column is removed from the record's schema should restore all forward-compatible attributes. 
---------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["a_decimal", #<BigDecimal:7f9786e4dc00,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:40 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:40.863664000 -05:00\na_time:\n- \n- 2014-01-10 16:02:40.863688000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:40.864569000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.864569000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:40.863664000 -05:00\na_time: 2014-01-10 16:02:40.863688000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:40.864569000 Z\nupdated_at: 2014-01-10 21:02:40.864569000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:40.863664000 -05:00\n- \na_time:\n- 2014-01-10 16:02:40.863688000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:40.864569000 Z\n- 2014-01-10 21:02:40.871031000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.1ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "widgets"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "awidgets" ("id","name","a_text","an_integer","a_float","a_decimal","a_datetime","a_time","a_date","a_boolean","created_at","updated_at","sacrificial_column","type") VALUES (1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'f', '2014-01-10 21:02:40.864569', '2014-01-10 21:02:40.871031', NULL, NULL)[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "widgets"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "awidgets"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "widgets" ("id","name","a_text","an_integer","a_float","a_decimal","a_datetime","a_time","a_date","a_boolean","created_at","updated_at","type") VALUES (1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'f', '2014-01-10 21:02:40.864569', '2014-01-10 21:02:40.871031', NULL)[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "awidgets"
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "versions" ADD "custom_created_at" datetime
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.1ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail should handle booleans. 
----------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["a_decimal", #<BigDecimal:7f97827f10b8,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:40 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:40.937534000 -05:00\na_time:\n- \n- 2014-01-10 16:02:40.937547000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:40.938210000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.938210000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:40.937534000 -05:00\na_time: 2014-01-10 16:02:40.937547000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:40.938210000 Z\nupdated_at: 2014-01-10 21:02:40.938210000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:40.937534000 -05:00\n- \na_time:\n- 2014-01-10 16:02:40.937547000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:40.938210000 Z\n- 2014-01-10 21:02:40.943001000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.1ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail should handle dates. 
-------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["a_decimal", #<BigDecimal:7f97868ae268,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:40 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:40.950992000 -05:00\na_time:\n- \n- 2014-01-10 16:02:40.950999000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:40.951463000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.951463000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:40.950992000 -05:00\na_time: 2014-01-10 16:02:40.950999000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:40.951463000 Z\nupdated_at: 2014-01-10 21:02:40.951463000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:40.950992000 -05:00\n- \na_time:\n- 2014-01-10 16:02:40.950999000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:40.951463000 Z\n- 2014-01-10 21:02:40.955181000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail should handle datetimes. 
-----------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["a_decimal", #<BigDecimal:7f9786c86368,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:40 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:40.963020000 -05:00\na_time:\n- \n- 2014-01-10 16:02:40.963026000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:40.963512000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.963512000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:40.963020000 -05:00\na_time: 2014-01-10 16:02:40.963026000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:40.963512000 Z\nupdated_at: 2014-01-10 21:02:40.963512000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:40.963020000 -05:00\n- \na_time:\n- 2014-01-10 16:02:40.963026000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:40.963512000 Z\n- 2014-01-10 21:02:40.967449000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.1ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail should handle decimals. 
----------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["a_decimal", #<BigDecimal:7f9782521ab8,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:40 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:40.976175000 -05:00\na_time:\n- \n- 2014-01-10 16:02:40.976190000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:40.976779000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.976779000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:40.976175000 -05:00\na_time: 2014-01-10 16:02:40.976190000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:40.976779000 Z\nupdated_at: 2014-01-10 21:02:40.976779000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:40.976175000 -05:00\n- \na_time:\n- 2014-01-10 16:02:40.976190000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:40.976779000 Z\n- 2014-01-10 21:02:40.980857000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.1ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail should handle floats. 
--------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["a_decimal", #<BigDecimal:7f97869c55e8,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:40 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:40.989375000 -05:00\na_time:\n- \n- 2014-01-10 16:02:40.989386000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:40.990013000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:40.990013000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:40 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:40.989375000 -05:00\na_time: 2014-01-10 16:02:40.989386000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:40.990013000 Z\nupdated_at: 2014-01-10 21:02:40.990013000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:40.989375000 -05:00\n- \na_time:\n- 2014-01-10 16:02:40.989386000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:40.990013000 Z\n- 2014-01-10 21:02:40.994023000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail should handle integers. 
----------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["a_decimal", #<BigDecimal:7f9786957250,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:41 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:41.002791000 -05:00\na_time:\n- \n- 2014-01-10 16:02:41.002801000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:41.003390000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.003390000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:41.002791000 -05:00\na_time: 2014-01-10 16:02:41.002801000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:41.003390000 Z\nupdated_at: 2014-01-10 21:02:41.003390000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:41.002791000 -05:00\n- \na_time:\n- 2014-01-10 16:02:41.002801000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:41.003390000 Z\n- 2014-01-10 21:02:41.007418000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail should handle strings. 
---------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["a_decimal", #<BigDecimal:7f97840083b8,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:41 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:41.040249000 -05:00\na_time:\n- \n- 2014-01-10 16:02:41.040263000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:41.040900000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.040900000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:41.040249000 -05:00\na_time: 2014-01-10 16:02:41.040263000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:41.040900000 Z\nupdated_at: 2014-01-10 21:02:41.040900000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:41.040249000 -05:00\n- \na_time:\n- 2014-01-10 16:02:41.040263000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:41.040900000 Z\n- 2014-01-10 21:02:41.045154000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail should handle text. 
------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["a_decimal", #<BigDecimal:7f9782711b98,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:41 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:41.053675000 -05:00\na_time:\n- \n- 2014-01-10 16:02:41.053687000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:41.054307000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.054307000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:41.053675000 -05:00\na_time: 2014-01-10 16:02:41.053687000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:41.054307000 Z\nupdated_at: 2014-01-10 21:02:41.054307000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:41.053675000 -05:00\n- \na_time:\n- 2014-01-10 16:02:41.053687000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:41.054307000 Z\n- 2014-01-10 21:02:41.058291000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
HasPaperTrailModelTest: test: A record's papertrail should handle times. 
-------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("a_boolean", "a_date", "a_datetime", "a_decimal", "a_float", "a_text", "a_time", "an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["a_boolean", true], ["a_date", Fri, 29 May 2009], ["a_datetime", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["a_decimal", #<BigDecimal:7f97868013d8,'0.271828E1',18(45)>], ["a_float", 153.01], ["a_text", "The quick brown fox"], ["a_time", 2014-01-10 16:02:41 -0500], ["an_integer", 42], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Warble"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Warble\na_text:\n- \n- The quick brown fox\nan_integer:\n- \n- 42\na_float:\n- \n- 153.01\na_decimal:\n- \n- 2.71828\na_datetime:\n- \n- !ruby/object:DateTime 2014-01-10 16:02:41.066534000 -05:00\na_time:\n- \n- 2014-01-10 16:02:41.066545000 -05:00\na_date:\n- \n- 2009-05-29\na_boolean:\n- \n- true\ncreated_at:\n- \n- 2014-01-10 21:02:41.067149000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.067149000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "a_float" = ?, "a_decimal" = ?, "a_datetime" = ?, "a_time" = ?, "a_date" = ?, "a_boolean" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", nil], ["a_text", nil], ["an_integer", nil], ["a_float", nil], ["a_decimal", nil], ["a_datetime", nil], ["a_time", nil], ["a_date", nil], ["a_boolean", false], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Warble\na_text: The quick brown fox\nan_integer: 42\na_float: 153.01\na_decimal: 2.71828\na_datetime: !ruby/object:DateTime 2014-01-10 16:02:41.066534000 -05:00\na_time: 2014-01-10 16:02:41.066545000 -05:00\na_date: 2009-05-29\na_boolean: true\ncreated_at: 2014-01-10 21:02:41.067149000 Z\nupdated_at: 2014-01-10 21:02:41.067149000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Warble\n- \na_text:\n- The quick brown fox\n- \nan_integer:\n- 42\n- \na_float:\n- 153.01\n- \na_decimal:\n- 2.71828\n- \na_datetime:\n- !ruby/object:DateTime 2014-01-10 16:02:41.066534000 -05:00\n- \na_time:\n- 2014-01-10 16:02:41.066545000 -05:00\n- \na_date:\n- 2009-05-29\n- \na_boolean:\n- true\n- false\nupdated_at:\n- 2014-01-10 21:02:41.067149000 Z\n- 2014-01-10 21:02:41.071327000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------
HasPaperTrailModelTest: test: A reified item should have a next version. 
-------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Bob"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Bob\ncreated_at:\n- \n- 2014-01-10 21:02:41.079906000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.079906000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Tom"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Bob\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.079906000 Z\nupdated_at: 2014-01-10 21:02:41.079906000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Bob\n- Tom\nupdated_at:\n- 2014-01-10 21:02:41.079906000 Z\n- 2014-01-10 21:02:41.082825000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Dick"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Tom\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.079906000 Z\nupdated_at: 2014-01-10 21:02:41.082825000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Tom\n- Dick\nupdated_at:\n- 2014-01-10 21:02:41.082825000 Z\n- 2014-01-10 21:02:41.085490000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Jane"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Dick\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.079906000 Z\nupdated_at: 2014-01-10 21:02:41.085490000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dick\n- Jane\nupdated_at:\n- 2014-01-10 21:02:41.085490000 Z\n- 2014-01-10 21:02:41.088303000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at > '2014-01-10 21:02:41.084603') ORDER BY versions.created_at ASC LIMIT 1[0m
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at > '2014-01-10 21:02:41.090052') ORDER BY versions.created_at ASC LIMIT 1[0m
  [1m[35mWidget Load (0.1ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------
HasPaperTrailModelTest: test: A reified item should have a previous version. 
-----------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Bob"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Bob\ncreated_at:\n- \n- 2014-01-10 21:02:41.105407000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.105407000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Tom"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Bob\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.105407000 Z\nupdated_at: 2014-01-10 21:02:41.105407000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Bob\n- Tom\nupdated_at:\n- 2014-01-10 21:02:41.105407000 Z\n- 2014-01-10 21:02:41.109630000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Dick"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Tom\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.105407000 Z\nupdated_at: 2014-01-10 21:02:41.109630000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Tom\n- Dick\nupdated_at:\n- 2014-01-10 21:02:41.109630000 Z\n- 2014-01-10 21:02:41.113151000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Jane"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Dick\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.105407000 Z\nupdated_at: 2014-01-10 21:02:41.113151000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dick\n- Jane\nupdated_at:\n- 2014-01-10 21:02:41.113151000 Z\n- 2014-01-10 21:02:41.116482000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:41.112021') ORDER BY versions.created_at DESC LIMIT 1
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:41.118411') ORDER BY versions.created_at DESC LIMIT 1
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (4.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A reified item should know which version it came from. 
-------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Bob"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Bob\ncreated_at:\n- \n- 2014-01-10 21:02:41.135573000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.135573000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Tom"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Bob\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.135573000 Z\nupdated_at: 2014-01-10 21:02:41.135573000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Bob\n- Tom\nupdated_at:\n- 2014-01-10 21:02:41.135573000 Z\n- 2014-01-10 21:02:41.138518000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Dick"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Tom\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.135573000 Z\nupdated_at: 2014-01-10 21:02:41.138518000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Tom\n- Dick\nupdated_at:\n- 2014-01-10 21:02:41.138518000 Z\n- 2014-01-10 21:02:41.141213000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Jane"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Dick\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.135573000 Z\nupdated_at: 2014-01-10 21:02:41.141213000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dick\n- Jane\nupdated_at:\n- 2014-01-10 21:02:41.141213000 Z\n- 2014-01-10 21:02:41.143924000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A reified item should return its previous self. 
------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Bob"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Bob\ncreated_at:\n- \n- 2014-01-10 21:02:41.150862000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.150862000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Tom"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Bob\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.150862000 Z\nupdated_at: 2014-01-10 21:02:41.150862000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Bob\n- Tom\nupdated_at:\n- 2014-01-10 21:02:41.150862000 Z\n- 2014-01-10 21:02:41.153767000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Dick"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Tom\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.150862000 Z\nupdated_at: 2014-01-10 21:02:41.153767000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Tom\n- Dick\nupdated_at:\n- 2014-01-10 21:02:41.153767000 Z\n- 2014-01-10 21:02:41.156444000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Jane"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Dick\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.150862000 Z\nupdated_at: 2014-01-10 21:02:41.156444000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dick\n- Jane\nupdated_at:\n- 2014-01-10 21:02:41.156444000 Z\n- 2014-01-10 21:02:41.159202000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:41.161029') ORDER BY versions.created_at DESC LIMIT 1
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A reified item with a column -version- and custom version_method should know which version it came from. 
---------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "legacy_widgets" ("name", "version") VALUES (?, ?)[0m  [["name", "foo"], ["version", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- foo\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "legacy_widgets" SET "name" = ? WHERE "legacy_widgets"."id" = 1[0m  [["name", "bar"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object", "---\nid: 1\nname: foo\nversion: 2\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- foo\n- bar\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "legacy_widgets" SET "name" = ? WHERE "legacy_widgets"."id" = 1[0m  [["name", "baz"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object", "---\nid: 1\nname: bar\nversion: 2\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- bar\n- baz\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "LegacyWidget"]]
  [1m[36mLegacyWidget Load (0.1ms)[0m  [1mSELECT "legacy_widgets".* FROM "legacy_widgets" WHERE "legacy_widgets"."id" = ? ORDER BY "legacy_widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A reified item with a column -version- and custom version_method should return its previous self. 
--------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "legacy_widgets" ("name", "version") VALUES (?, ?)[0m  [["name", "foo"], ["version", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- foo\nid:\n- \n- 1\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "legacy_widgets" SET "name" = ? WHERE "legacy_widgets"."id" = 1[0m  [["name", "bar"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object", "---\nid: 1\nname: foo\nversion: 2\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- foo\n- bar\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "legacy_widgets" SET "name" = ? WHERE "legacy_widgets"."id" = 1[0m  [["name", "baz"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "LegacyWidget"], ["object", "---\nid: 1\nname: bar\nversion: 2\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- bar\n- baz\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "LegacyWidget"]]
  [1m[36mLegacyWidget Load (0.1ms)[0m  [1mSELECT "legacy_widgets".* FROM "legacy_widgets" WHERE "legacy_widgets"."id" = ? ORDER BY "legacy_widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "LegacyWidget"]]
  [1m[36mLegacyWidget Load (0.0ms)[0m  [1mSELECT "legacy_widgets".* FROM "legacy_widgets" WHERE "legacy_widgets"."id" = ? ORDER BY "legacy_widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'LegacyWidget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:41.193717') ORDER BY versions.created_at DESC LIMIT 1
  [1m[36mLegacyWidget Load (0.0ms)[0m  [1mSELECT "legacy_widgets".* FROM "legacy_widgets" WHERE "legacy_widgets"."id" = ? ORDER BY "legacy_widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------
HasPaperTrailModelTest: test: A subclass should reify with the correct type. 
-----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "type", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["type", "FooWidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntype:\n- \n- FooWidget\ncreated_at:\n- \n- 2014-01-10 21:02:41.237851000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.237851000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."type" IN ('FooWidget') AND "widgets"."id" = 1[0m  [["name", "Foo"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: \na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.237851000 Z\nupdated_at: 2014-01-10 21:02:41.237851000 Z\ntype: FooWidget\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Foo\nupdated_at:\n- 2014-01-10 21:02:41.237851000 Z\n- 2014-01-10 21:02:41.241652000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:41.244312') ORDER BY versions.created_at DESC LIMIT 1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at > '2014-01-10 21:02:41.244312') ORDER BY versions.created_at ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A subclass should should return the correct originator. 
--------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "type", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["type", "FooWidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntype:\n- \n- FooWidget\ncreated_at:\n- \n- 2014-01-10 21:02:41.249272000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.249272000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."type" IN ('FooWidget') AND "widgets"."id" = 1  [["name", "Foo"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: \na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.249272000 Z\nupdated_at: 2014-01-10 21:02:41.249272000 Z\ntype: FooWidget\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Foo\nupdated_at:\n- 2014-01-10 21:02:41.249272000 Z\n- 2014-01-10 21:02:41.252315000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."type" IN ('FooWidget') AND "widgets"."id" = 1  [["name", "Geoffrey"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes", "whodunnit") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Foo\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.249272000 Z\nupdated_at: 2014-01-10 21:02:41.252315000 Z\ntype: FooWidget\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Foo\n- Geoffrey\nupdated_at:\n- 2014-01-10 21:02:41.252315000 Z\n- 2014-01-10 21:02:41.255181000 Z\n"], ["whodunnit", "Ben"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 ORDER BY "versions"."id" DESC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: A subclass when destroyed should reify with the correct type. 
--------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "type", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["type", "FooWidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntype:\n- \n- FooWidget\ncreated_at:\n- \n- 2014-01-10 21:02:41.260154000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.260154000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."type" IN ('FooWidget') AND "widgets"."id" = 1[0m  [["name", "Foo"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: \na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.260154000 Z\nupdated_at: 2014-01-10 21:02:41.260154000 Z\ntype: FooWidget\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Foo\nupdated_at:\n- 2014-01-10 21:02:41.260154000 Z\n- 2014-01-10 21:02:41.263271000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "widgets" WHERE "widgets"."type" IN ('FooWidget') AND "widgets"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Foo\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.260154000 Z\nupdated_at: 2014-01-10 21:02:41.263271000 Z\ntype: FooWidget\n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:41.268007') ORDER BY versions.created_at DESC LIMIT 1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" ORDER BY "versions"."id" DESC LIMIT 1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at > '2014-01-10 21:02:41.268007') ORDER BY versions.created_at ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An existing model instance which uses a custom PaperTrail::Version class on the first version should have the correct index. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Post"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPostVersion Load (0.1ms)[0m  SELECT "post_versions".* FROM "post_versions" WHERE "post_versions"."item_id" = ? AND "post_versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Post"]]
  [1m[36mPostVersion Load (0.1ms)[0m  [1mSELECT post_versions.created_at, post_versions.id FROM "post_versions" WHERE "post_versions"."item_type" = 'Post' AND "post_versions"."item_id" = 1 ORDER BY post_versions.created_at ASC[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An existing model instance which uses a custom PaperTrail::Version class should have one post version. 
-------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Post"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "post_versions"
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An existing model instance which uses a custom PaperTrail::Version class should have versions of the custom class. 
-------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "posts" DEFAULT VALUES
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type") VALUES (?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Post"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPostVersion Load (0.1ms)[0m  [1mSELECT "post_versions".* FROM "post_versions" WHERE "post_versions"."item_id" = ? AND "post_versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Post"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An existing model instance which uses a custom PaperTrail::Version class which is modified should change the number of post versions. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "posts" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Post"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "posts" SET "content" = ? WHERE "posts"."id" = 1[0m  [["content", "Some new content"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Post"], ["object", "---\nid: 1\ntitle: \ncontent: \n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "post_versions"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An existing model instance which uses a custom PaperTrail::Version class which is modified should not change the number of versions. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "posts" DEFAULT VALUES
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type") VALUES (?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Post"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "posts" SET "content" = ? WHERE "posts"."id" = 1  [["content", "Some new content"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Post"], ["object", "---\nid: 1\ntitle: \ncontent: \n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An existing model instance which uses a custom PaperTrail::Version class which is modified should not have stored changes when object_changes column doesn't exist. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "posts" DEFAULT VALUES[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Post"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "posts" SET "content" = ? WHERE "posts"."id" = 1[0m  [["content", "Some new content"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "post_versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Post"], ["object", "---\nid: 1\ntitle: \ncontent: \n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPostVersion Load (0.2ms)[0m  SELECT "post_versions".* FROM "post_versions" WHERE "post_versions"."item_id" = ? AND "post_versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Post"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created and destroyed should store dynamic meta data based on an attribute of the item prior to the destruction. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("title") VALUES (?)  [["title", "Foobar"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144389354620"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "articles" WHERE "articles"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "question", "title") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144389354620"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: Foobar\ncontent: \nabstract: \n"], ["question", "31 + 11 = 42"], ["title", "Foobar"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created and destroyed should store dynamic meta data which depends on the item. 
-------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title") VALUES (?)[0m  [["title", "Foobar"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144351524320"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "articles" WHERE "articles"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "question", "title") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144351524320"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: Foobar\ncontent: \nabstract: \n"], ["question", "31 + 11 = 42"], ["title", "Foobar"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created and destroyed should store dynamic meta data which is independent of the item. 
--------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title") VALUES (?)  [["title", "Foobar"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144352206480"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "articles" WHERE "articles"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "question", "title") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144352206480"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: Foobar\ncontent: \nabstract: \n"], ["question", "31 + 11 = 42"], ["title", "Foobar"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created and destroyed should store fixed meta data. 
---------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title") VALUES (?)[0m  [["title", "Foobar"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144387335740"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "articles" WHERE "articles"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "question", "title") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144387335740"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: Foobar\ncontent: \nabstract: \n"], ["question", "31 + 11 = 42"], ["title", "Foobar"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created and updated should store dynamic meta data based on an attribute of the item prior to the update. 
---------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title") VALUES (?)  [["title", "Foobar"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144387891940"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "content" = ?, "title" = ? WHERE "articles"."id" = 1  [["content", "Better text."], ["title", "Rhubarb"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question", "title") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144387891940"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: Foobar\ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Better text.\n"], ["question", "31 + 11 = 42"], ["title", "Foobar"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created and updated should store dynamic meta data which depends on the item. 
-----------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title") VALUES (?)[0m  [["title", "Foobar"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144351825260"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "content" = ?, "title" = ? WHERE "articles"."id" = 1[0m  [["content", "Better text."], ["title", "Rhubarb"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question", "title") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144351825260"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: Foobar\ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Better text.\n"], ["question", "31 + 11 = 42"], ["title", "Foobar"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created and updated should store dynamic meta data which is independent of the item. 
------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title") VALUES (?)  [["title", "Foobar"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144387483340"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "articles" SET "content" = ?, "title" = ? WHERE "articles"."id" = 1  [["content", "Better text."], ["title", "Rhubarb"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question", "title") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144387483340"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: Foobar\ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Better text.\n"], ["question", "31 + 11 = 42"], ["title", "Foobar"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created and updated should store fixed meta data. 
-------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title") VALUES (?)[0m  [["title", "Foobar"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144389155180"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "articles" SET "content" = ?, "title" = ? WHERE "articles"."id" = 1[0m  [["content", "Better text."], ["title", "Rhubarb"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "object", "object_changes", "question", "title") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144389155180"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Article"], ["object", "---\nid: 1\ntitle: Foobar\ncontent: \nabstract: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncontent:\n- \n- Better text.\n"], ["question", "31 + 11 = 42"], ["title", "Foobar"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created should store dynamic meta data based on a method of the item. 
---------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title") VALUES (?)  [["title", "Foobar"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144388826220"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created should store dynamic meta data based on an attribute of the item prior to creation. 
-------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "articles" ("title") VALUES (?)[0m  [["title", "Foobar"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144388881100"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created should store dynamic meta data which depends on the item. 
-----------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title") VALUES (?)  [["title", "Foobar"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144389453100"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created should store dynamic meta data which is independent of the item. 
------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "articles" ("title") VALUES (?)[0m  [["title", "Foobar"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["action", "70144389506580"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Article"]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item which is created should store fixed meta data. 
-------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "articles" ("title") VALUES (?)  [["title", "Foobar"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("action", "answer", "article_id", "created_at", "event", "item_id", "item_type", "question") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["action", "70144388423080"], ["answer", 42], ["article_id", 1], ["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Article"], ["question", "31 + 11 = 42"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Article"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions .versions_between should return versions in the time period. 
-----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.381039000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.381039000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.381039000 Z\nupdated_at: 2014-01-10 21:02:41.381039000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.381039000 Z\n- 2014-01-10 21:02:41.383708000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.381039000 Z\nupdated_at: 2014-01-10 21:02:41.383708000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.383708000 Z\n- 2014-01-10 21:02:41.386376000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1  [["created_at", Wed, 11 Dec 2013 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2[0m  [["created_at", Thu, 26 Dec 2013 21:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3  [["created_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["updated_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Digit\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.381039000 Z\nupdated_at: 2014-01-10 21:02:41.386376000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nupdated_at:\n- 2014-01-10 21:02:41.386376000 Z\n- 2014-01-09 21:02:41.388976000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2013-12-21 21:02:41.394568' AND versions.created_at < '2013-12-31 21:02:41.394616') ORDER BY created_at ASC, versions.created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2013-12-26 21:02:41.388937') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2013-11-26 21:02:41.399068' AND versions.created_at < '2013-12-31 21:02:41.399128') ORDER BY created_at ASC, versions.created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2013-12-11 21:02:41.388845') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2013-12-26 21:02:41.388937') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2013-12-25 21:02:41.405150' AND versions.created_at < '2014-01-10 21:01:41.405194') ORDER BY created_at ASC, versions.created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2013-12-26 21:02:41.388937') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09 21:02:41.388976') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2013-11-11 21:02:41.411183' AND versions.created_at < '2013-11-26 21:02:41.411230') ORDER BY created_at ASC, versions.created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions on the first version should have a nil previous version. 
-------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.414547000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.414547000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.414547000 Z\nupdated_at: 2014-01-10 21:02:41.414547000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.414547000 Z\n- 2014-01-10 21:02:41.418660000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.414547000 Z\nupdated_at: 2014-01-10 21:02:41.418660000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.418660000 Z\n- 2014-01-10 21:02:41.422075000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:41.417455') ORDER BY versions.created_at DESC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions on the first version should return the correct index. 
----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.427695000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.427695000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.427695000 Z\nupdated_at: 2014-01-10 21:02:41.427695000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.427695000 Z\n- 2014-01-10 21:02:41.430576000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.427695000 Z\nupdated_at: 2014-01-10 21:02:41.430576000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.430576000 Z\n- 2014-01-10 21:02:41.433106000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT versions.created_at, versions.id FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 ORDER BY versions.created_at ASC[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions on the first version should return the next version. 
---------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.438168000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.438168000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.438168000 Z\nupdated_at: 2014-01-10 21:02:41.438168000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.438168000 Z\n- 2014-01-10 21:02:41.441148000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.438168000 Z\nupdated_at: 2014-01-10 21:02:41.441148000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.441148000 Z\n- 2014-01-10 21:02:41.443668000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at > '2014-01-10 21:02:41.440236') ORDER BY versions.created_at ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions on the last version should have a nil next version. 
--------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.475779000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.475779000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.475779000 Z\nupdated_at: 2014-01-10 21:02:41.475779000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.475779000 Z\n- 2014-01-10 21:02:41.479004000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.475779000 Z\nupdated_at: 2014-01-10 21:02:41.479004000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.479004000 Z\n- 2014-01-10 21:02:41.481635000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at > '2014-01-10 21:02:41.483483') ORDER BY versions.created_at ASC LIMIT 1
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions on the last version should return the correct index. 
---------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.488941000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.488941000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.488941000 Z\nupdated_at: 2014-01-10 21:02:41.488941000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.488941000 Z\n- 2014-01-10 21:02:41.492177000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.488941000 Z\nupdated_at: 2014-01-10 21:02:41.492177000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.492177000 Z\n- 2014-01-10 21:02:41.494904000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT versions.created_at, versions.id FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 ORDER BY versions.created_at ASC[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions on the last version should return the previous version. 
------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.500476000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.500476000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.500476000 Z\nupdated_at: 2014-01-10 21:02:41.500476000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.500476000 Z\n- 2014-01-10 21:02:41.503178000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.500476000 Z\nupdated_at: 2014-01-10 21:02:41.503178000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.503178000 Z\n- 2014-01-10 21:02:41.505832000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (versions.created_at < '2014-01-10 21:02:41.507502') ORDER BY versions.created_at DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions which were created over time passing in a string representation of a timestamp should still return a widget when appropriate. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.511518000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.511518000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.511518000 Z\nupdated_at: 2014-01-10 21:02:41.511518000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.511518000 Z\n- 2014-01-10 21:02:41.514251000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.511518000 Z\nupdated_at: 2014-01-10 21:02:41.514251000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.514251000 Z\n- 2014-01-10 21:02:41.517046000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1[0m  [["created_at", Wed, 08 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3[0m  [["created_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "updated_at" = ? WHERE "widgets"."id" = 1  [["updated_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Digit\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.511518000 Z\nupdated_at: 2014-01-10 21:02:41.517046000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nupdated_at:\n- 2014-01-10 21:02:41.517046000 Z\n- 2014-01-10 20:02:41.519472000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-08 21:02:42 UTC') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09 21:02:42 UTC') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-10 20:02:42 UTC') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions which were created over time should return how it looked when created for version_at its creation. 
-------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.535422000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.535422000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.535422000 Z\nupdated_at: 2014-01-10 21:02:41.535422000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.535422000 Z\n- 2014-01-10 21:02:41.538333000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.535422000 Z\nupdated_at: 2014-01-10 21:02:41.538333000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.538333000 Z\n- 2014-01-10 21:02:41.540849000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1[0m  [["created_at", Wed, 08 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3[0m  [["created_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "updated_at" = ? WHERE "widgets"."id" = 1  [["updated_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Digit\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.535422000 Z\nupdated_at: 2014-01-10 21:02:41.540849000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nupdated_at:\n- 2014-01-10 21:02:41.540849000 Z\n- 2014-01-10 20:02:41.543248000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-08 21:02:41.543151') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions which were created over time should return how it looked when created for version_at just before its first update. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.553915000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.553915000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.553915000 Z\nupdated_at: 2014-01-10 21:02:41.553915000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.553915000 Z\n- 2014-01-10 21:02:41.556784000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.553915000 Z\nupdated_at: 2014-01-10 21:02:41.556784000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.556784000 Z\n- 2014-01-10 21:02:41.559359000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1[0m  [["created_at", Wed, 08 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3[0m  [["created_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "updated_at" = ? WHERE "widgets"."id" = 1  [["updated_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Digit\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.553915000 Z\nupdated_at: 2014-01-10 21:02:41.559359000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nupdated_at:\n- 2014-01-10 21:02:41.559359000 Z\n- 2014-01-10 20:02:41.561685000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09 21:02:40.561652') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions which were created over time should return how it looked when first updated for version_at its first update. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.571893000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.571893000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.571893000 Z\nupdated_at: 2014-01-10 21:02:41.571893000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.571893000 Z\n- 2014-01-10 21:02:41.574606000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.571893000 Z\nupdated_at: 2014-01-10 21:02:41.574606000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.574606000 Z\n- 2014-01-10 21:02:41.577116000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1[0m  [["created_at", Wed, 08 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3[0m  [["created_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "updated_at" = ? WHERE "widgets"."id" = 1  [["updated_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Digit\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.571893000 Z\nupdated_at: 2014-01-10 21:02:41.577116000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nupdated_at:\n- 2014-01-10 21:02:41.577116000 Z\n- 2014-01-10 20:02:41.579570000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09 21:02:41.579527') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions which were created over time should return how it looked when first updated for version_at just before its second update. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.590775000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.590775000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.590775000 Z\nupdated_at: 2014-01-10 21:02:41.590775000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.590775000 Z\n- 2014-01-10 21:02:41.593691000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.590775000 Z\nupdated_at: 2014-01-10 21:02:41.593691000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.593691000 Z\n- 2014-01-10 21:02:41.596278000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1[0m  [["created_at", Wed, 08 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3[0m  [["created_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "updated_at" = ? WHERE "widgets"."id" = 1  [["updated_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Digit\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.590775000 Z\nupdated_at: 2014-01-10 21:02:41.596278000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nupdated_at:\n- 2014-01-10 21:02:41.596278000 Z\n- 2014-01-10 20:02:41.598695000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-10 20:02:40.598695') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.1ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions which were created over time should return how it looked when subsequently updated for version_at its second update. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.609450000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.609450000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.609450000 Z\nupdated_at: 2014-01-10 21:02:41.609450000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.609450000 Z\n- 2014-01-10 21:02:41.612407000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.609450000 Z\nupdated_at: 2014-01-10 21:02:41.612407000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.612407000 Z\n- 2014-01-10 21:02:41.615305000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1[0m  [["created_at", Wed, 08 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3[0m  [["created_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "updated_at" = ? WHERE "widgets"."id" = 1  [["updated_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Digit\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.609450000 Z\nupdated_at: 2014-01-10 21:02:41.615305000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nupdated_at:\n- 2014-01-10 21:02:41.615305000 Z\n- 2014-01-10 20:02:41.618087000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-10 20:02:41.618087') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35mWidget Load (0.0ms)[0m  SELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions which were created over time should return nil for version_at before it was created. 
-----------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.629003000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.629003000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.629003000 Z\nupdated_at: 2014-01-10 21:02:41.629003000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.629003000 Z\n- 2014-01-10 21:02:41.632014000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.629003000 Z\nupdated_at: 2014-01-10 21:02:41.632014000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.632014000 Z\n- 2014-01-10 21:02:41.634551000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1[0m  [["created_at", Wed, 08 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3[0m  [["created_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "updated_at" = ? WHERE "widgets"."id" = 1  [["updated_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Digit\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.629003000 Z\nupdated_at: 2014-01-10 21:02:41.634551000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nupdated_at:\n- 2014-01-10 21:02:41.634551000 Z\n- 2014-01-10 20:02:41.636974000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-08 21:02:40.636878') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An item with versions which were created over time should return the current object for version_at after latest update. 
------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Widget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Widget\ncreated_at:\n- \n- 2014-01-10 21:02:41.644850000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.644850000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Fidget"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Widget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.644850000 Z\nupdated_at: 2014-01-10 21:02:41.644850000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Widget\n- Fidget\nupdated_at:\n- 2014-01-10 21:02:41.644850000 Z\n- 2014-01-10 21:02:41.647579000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "Digit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Fidget\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.644850000 Z\nupdated_at: 2014-01-10 21:02:41.647579000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Fidget\n- Digit\nupdated_at:\n- 2014-01-10 21:02:41.647579000 Z\n- 2014-01-10 21:02:41.650138000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1  [["created_at", Wed, 08 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2[0m  [["created_at", Thu, 09 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3  [["created_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["updated_at", Fri, 10 Jan 2014 20:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Digit\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.644850000 Z\nupdated_at: 2014-01-10 21:02:41.650138000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nupdated_at:\n- 2014-01-10 21:02:41.650138000 Z\n- 2014-01-10 20:02:41.652454000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-11 21:02:41.658304') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An overwritten default accessor should return "overwritten" value on live instance. 
------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "songs" ("length") VALUES (?)  [["length", 240]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Song"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nlength:\n- \n- 4\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "songs" SET "length" = ? WHERE "songs"."id" = 1  [["length", 300]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Song"], ["object", "---\nid: 1\nlength: 240\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nlength:\n- 240\n- 5\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An overwritten default accessor should return "overwritten" value on reified instance. 
---------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "songs" ("length") VALUES (?)  [["length", 240]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Song"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nlength:\n- \n- 4\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "songs" SET "length" = ? WHERE "songs"."id" = 1  [["length", 300]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Song"], ["object", "---\nid: 1\nlength: 240\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nlength:\n- 240\n- 5\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Song"]]
  [1m[35mSong Load (0.1ms)[0m  SELECT "songs".* FROM "songs" WHERE "songs"."id" = ? ORDER BY "songs"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: An unsaved record should not have a version created on destroy. 
----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: The `on` option allows a symbol to be passed should only have a version for hte create event. 
----------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "fluxors" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Fluxor"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1  [["name", "blah"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "fluxors" WHERE "fluxors"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: The `on` option on create should only have a version for the create event. 
---------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "fluxors" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Fluxor"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1[0m  [["name", "blah"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "fluxors" WHERE "fluxors"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.0ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: The `on` option on destroy should only have a version for the destroy event. 
-----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "fluxors" DEFAULT VALUES
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1[0m  [["name", "blah"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "fluxors" WHERE "fluxors"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Fluxor"], ["object", "---\nid: 1\nwidget_id: \nname: blah\n"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: The `on` option on update should only have a version for the update event. 
---------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "fluxors" DEFAULT VALUES[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1  [["name", "blah"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "fluxors" WHERE "fluxors"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.0ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------
HasPaperTrailModelTest: test: Timestamps should not generate warning. 
----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "wotsits" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "wotsit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Wotsit"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- wotsit\ncreated_at:\n- \n- 2014-01-10 21:02:41.739866000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.739866000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "wotsits" SET "name" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1[0m  [["name", "changed"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: \nname: wotsit\ncreated_at: 2014-01-10 21:02:41.739866000 Z\nupdated_at: 2014-01-10 21:02:41.739866000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- wotsit\n- changed\nupdated_at:\n- 2014-01-10 21:02:41.739866000 Z\n- 2014-01-10 21:02:41.743800000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------
HasPaperTrailModelTest: test: Timestamps should record timestamps. 
-------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "wotsits" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "wotsit"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Wotsit"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- wotsit\ncreated_at:\n- \n- 2014-01-10 21:02:41.749028000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.749028000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "wotsits" SET "name" = ?, "updated_at" = ? WHERE "wotsits"."id" = 1[0m  [["name", "changed"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Wotsit"], ["object", "---\nid: 1\nwidget_id: \nname: wotsit\ncreated_at: 2014-01-10 21:02:41.749028000 Z\nupdated_at: 2014-01-10 21:02:41.749028000 Z\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- wotsit\n- changed\nupdated_at:\n- 2014-01-10 21:02:41.749028000 Z\n- 2014-01-10 21:02:41.752254000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36mWotsit Load (0.1ms)[0m  [1mSELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Wotsit"]]
  [1m[36mWotsit Load (0.0ms)[0m  [1mSELECT "wotsits".* FROM "wotsits" WHERE "wotsits"."id" = ? ORDER BY "wotsits"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer should be an instance of ActiveSupport::TimeZone. 
--------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved should record.changes (before save) returns the original, unserialized values. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("time_zone") VALUES (?)[0m  [["time_zone", "Samoa"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved should version.changeset should be the same as record.changes was before the save. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("time_zone") VALUES (?)[0m  [["time_zone", "Samoa"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Person"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Person"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved should version.changeset should convert the attribute value back to its original, unserialized value. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("time_zone") VALUES (?)[0m  [["time_zone", "Samoa"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Person"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved should version.object_changes attribute should have stored the value returned by the attribute serializer. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("time_zone") VALUES (?)  [["time_zone", "Samoa"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Person"]]
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved should version.object_changes should not have stored the default, ridiculously long (to_yaml) serialization of the TimeZone object. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("time_zone") VALUES (?)[0m  [["time_zone", "Samoa"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Person"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Person"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved when that attribute is updated should record.changes (before save) returns the original, unserialized values. 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("time_zone") VALUES (?)[0m  [["time_zone", "Samoa"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "people" SET "time_zone" = ? WHERE "people"."id" = 1[0m  [["time_zone", "Pacific Time (US & Canada)"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Person"], ["object", "---\nid: 1\nname: \ntime_zone: Samoa\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- Samoa\n- Pacific Time (US & Canada)\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved when that attribute is updated should version.changeset should be the same as record.changes was before the save. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "people" ("time_zone") VALUES (?)[0m  [["time_zone", "Samoa"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "people" SET "time_zone" = ? WHERE "people"."id" = 1[0m  [["time_zone", "Pacific Time (US & Canada)"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Person"], ["object", "---\nid: 1\nname: \ntime_zone: Samoa\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- Samoa\n- Pacific Time (US & Canada)\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Person"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Person"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved when that attribute is updated should version.changeset should convert the attribute value back to its original, unserialized value. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("time_zone") VALUES (?)[0m  [["time_zone", "Samoa"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "people" SET "time_zone" = ? WHERE "people"."id" = 1[0m  [["time_zone", "Pacific Time (US & Canada)"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Person"], ["object", "---\nid: 1\nname: \ntime_zone: Samoa\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- Samoa\n- Pacific Time (US & Canada)\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Person"]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved when that attribute is updated should version.object attribute should have stored the value returned by the attribute serializer. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "people" ("time_zone") VALUES (?)  [["time_zone", "Samoa"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "people" SET "time_zone" = ? WHERE "people"."id" = 1  [["time_zone", "Pacific Time (US & Canada)"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Person"], ["object", "---\nid: 1\nname: \ntime_zone: Samoa\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- Samoa\n- Pacific Time (US & Canada)\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Person"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved when that attribute is updated should version.object should not have stored the default, ridiculously long (to_yaml) serialization of the TimeZone object. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("time_zone") VALUES (?)[0m  [["time_zone", "Samoa"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "people" SET "time_zone" = ? WHERE "people"."id" = 1[0m  [["time_zone", "Pacific Time (US & Canada)"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Person"], ["object", "---\nid: 1\nname: \ntime_zone: Samoa\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- Samoa\n- Pacific Time (US & Canada)\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Person"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Person"]]
  [1m[35m (18.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved when that attribute is updated should version.object_changes attribute should have stored the value returned by the attribute serializer. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "people" ("time_zone") VALUES (?)[0m  [["time_zone", "Samoa"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "people" SET "time_zone" = ? WHERE "people"."id" = 1[0m  [["time_zone", "Pacific Time (US & Canada)"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Person"], ["object", "---\nid: 1\nname: \ntime_zone: Samoa\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- Samoa\n- Pacific Time (US & Canada)\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Person"]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved when that attribute is updated should version.object_changes should not have stored the default, ridiculously long (to_yaml) serialization of the TimeZone object. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("time_zone") VALUES (?)  [["time_zone", "Samoa"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "people" SET "time_zone" = ? WHERE "people"."id" = 1  [["time_zone", "Pacific Time (US & Canada)"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Person"], ["object", "---\nid: 1\nname: \ntime_zone: Samoa\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- Samoa\n- Pacific Time (US & Canada)\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Person"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Person"]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: When an attribute has a custom serializer when the model is saved when that attribute is updated should version.reify should convert the attribute value back to its original, unserialized value. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "people" ("time_zone") VALUES (?)  [["time_zone", "Samoa"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Person"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- \n- Samoa\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "people" SET "time_zone" = ? WHERE "people"."id" = 1  [["time_zone", "Pacific Time (US & Canada)"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Person"], ["object", "---\nid: 1\nname: \ntime_zone: Samoa\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntime_zone:\n- Samoa\n- Pacific Time (US & Canada)\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Person"]]
  [1m[35mPerson Load (0.1ms)[0m  SELECT "people".* FROM "people" WHERE "people"."id" = ? ORDER BY "people"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: `PaperTrail::Config.version_limit` set should limit the number of versions to 3 (2 plus the created at event). 
---------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["name", "Henry"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:41.987962000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:41.987962000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "voluptas"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.987962000 Z\nupdated_at: 2014-01-10 21:02:41.987962000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- voluptas\nupdated_at:\n- 2014-01-10 21:02:41.987962000 Z\n- 2014-01-10 21:02:41.991925000 Z\n"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "enim"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: voluptas\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.987962000 Z\nupdated_at: 2014-01-10 21:02:41.991925000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- voluptas\n- enim\nupdated_at:\n- 2014-01-10 21:02:41.991925000 Z\n- 2014-01-10 21:02:41.995565000 Z\n"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "harum"], ["updated_at", Fri, 10 Jan 2014 21:02:41 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: enim\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.987962000 Z\nupdated_at: 2014-01-10 21:02:41.995565000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- enim\n- harum\nupdated_at:\n- 2014-01-10 21:02:41.995565000 Z\n- 2014-01-10 21:02:41.998748000 Z\n"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create') ORDER BY "versions"."id" DESC LIMIT 2
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "soluta"], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: harum\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.987962000 Z\nupdated_at: 2014-01-10 21:02:41.998748000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- harum\n- soluta\nupdated_at:\n- 2014-01-10 21:02:41.998748000 Z\n- 2014-01-10 21:02:42.003813000 Z\n"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create') ORDER BY "versions"."id" DESC LIMIT 2
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 3]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "id"], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: soluta\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.987962000 Z\nupdated_at: 2014-01-10 21:02:42.003813000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- soluta\n- id\nupdated_at:\n- 2014-01-10 21:02:42.003813000 Z\n- 2014-01-10 21:02:42.008443000 Z\n"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create') ORDER BY "versions"."id" DESC LIMIT 2
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 4]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1[0m  [["name", "sed"], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: id\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:41.987962000 Z\nupdated_at: 2014-01-10 21:02:42.008443000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- id\n- sed\nupdated_at:\n- 2014-01-10 21:02:42.008443000 Z\n- 2014-01-10 21:02:42.012327000 Z\n"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create') ORDER BY "versions"."id" DESC LIMIT 2
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 AND (event <> 'create')[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 5]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.5ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: custom events on create should only have a version for the created event. 
--------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "fluxors" ("name") VALUES (?)[0m  [["name", "blah"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "created"], ["item_id", 1], ["item_type", "Fluxor"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- blah\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "fluxors" WHERE "fluxors"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: custom events on destroy should only have a version for the destroy event. 
---------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "fluxors" DEFAULT VALUES[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1  [["name", "blah"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "fluxors" WHERE "fluxors"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "destroyed"], ["item_id", 1], ["item_type", "Fluxor"], ["object", "---\nid: 1\nwidget_id: \nname: blah\n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------
HasPaperTrailModelTest: test: custom events on update should only have a version for the name_updated event. 
-------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "fluxors" DEFAULT VALUES
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1[0m  [["name", "blah"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "fluxors" WHERE "fluxors"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.0ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------
InheritanceColumnTest: test: STI models should work with custom STI inheritance column. 
----------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "animals" ("name") VALUES (?)  [["name", "Animal"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Animal\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Animal from the Muppets"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Animal\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Animal\n- Animal from the Muppets\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Animal Muppet"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Animal from the Muppets\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Animal from the Muppets\n- Animal Muppet\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "animals" WHERE "animals"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Animal Muppet\nspecies: \n"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Snoopy"], ["species", "Dog"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Snoopy\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Scooby"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Snoopy\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Snoopy\n- Scooby\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Scooby Doo"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Scooby\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Scooby\n- Scooby Doo\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "animals" WHERE "animals"."species" IN ('Dog') AND "animals"."id" = ?[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "destroy"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Scooby Doo\nspecies: Dog\n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 2], ["item_type", "Animal"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Garfield"], ["species", "Cat"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Garfield\nid:\n- \n- 3\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Garfield (I hate Mondays)"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Garfield\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Garfield\n- Garfield (I hate Mondays)\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Garfield The Cat"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Garfield (I hate Mondays)\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Garfield (I hate Mondays)\n- Garfield The Cat\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "animals" WHERE "animals"."species" IN ('Cat') AND "animals"."id" = ?  [["id", 3]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "destroy"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Garfield The Cat\nspecies: Cat\n"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 3], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35mAnimal Load (0.1ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mAnimal Load (0.0ms)[0m  [1mSELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = 2[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = 2 ORDER BY "versions"."id" ASC LIMIT 1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = 2[0m
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mAnimal Load (0.0ms)[0m  [1mSELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = 3[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = 3 ORDER BY "versions"."id" ASC LIMIT 1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = 3[0m
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 3]]
  [1m[36mAnimal Load (0.0ms)[0m  [1mSELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1[0m  [["id", 3]]
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 3]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------
JSONTest: test: `dump` class method should `serialize` Ruby to JSON. 
---------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
JSONTest: test: `dump` class method should exist. 
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------
JSONTest: test: `load` class method should `deserialize` JSON to Ruby. 
-----------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
JSONTest: test: `load` class method should exist. 
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------
MixinJsonTest: test: `dump` class method should `serialize` Ruby to JSON, removing pairs with `nil` values. 
------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------
MixinJsonTest: test: `dump` class method should exist. 
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------
MixinJsonTest: test: `load` class method should `deserialize` JSON to Ruby, removing pairs with `blank` keys or values. 
------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
MixinJsonTest: test: `load` class method should exist. 
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------
MixinYamlTest: test: `dump` class method should `serialize` Ruby to YAML, removing pairs with `nil` values. 
------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
MixinYamlTest: test: `dump` class method should exist. 
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------
MixinYamlTest: test: `load` class method should `deserialize` YAML to Ruby, removing pairs with `blank` keys or values. 
------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------------------
MixinYamlTest: test: `load` class method should exist. 
-------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------------------------------------
ModularSinatraTest: test: `PaperTrail::Sinatra` in a `Sinatra::Base` application should sets the `user_for_paper_trail` from the `current_user` method. 
--------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["name", "foo"], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes", "whodunnit") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- foo\ncreated_at:\n- \n- 2014-01-10 21:02:42.224094000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.224094000 Z\nid:\n- \n- 1\n"], ["whodunnit", "foobar"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWidget Load (0.1ms)[0m  [1mSELECT "widgets".* FROM "widgets" ORDER BY "widgets"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------
ModularSinatraTest: test_baseline
---------------------------------
  [1m[35mWidget Load (0.2ms)[0m  SELECT "widgets".* FROM "widgets" ORDER BY "widgets"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "widgets" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncreated_at:\n- \n- 2014-01-10 21:02:42.232152000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.232152000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------------------------------
PaperTrail::VersionTest: test: PaperTrail::Version.creates should return only create events. 
---------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "widgets"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "widgets"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "awidgets"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "awidgets"
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "versions" ADD "custom_created_at" datetime
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."event" = 'create'[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."event" = 'create'
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------
PaperTrail::VersionTest: test: PaperTrail::Version.destroys should return only destroy events. 
-----------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "widgets"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "widgets"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "awidgets"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "awidgets"[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "versions" ADD "custom_created_at" datetime[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."event" = 'create'
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "animals" WHERE "animals"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: \nspecies: \n"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."event" = 'destroy'
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."event" = 'destroy'[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------
PaperTrail::VersionTest: test: PaperTrail::Version.not_creates should return all versions except create events. 
----------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "widgets"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "widgets"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "awidgets"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "awidgets"
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "versions" ADD "custom_created_at" datetime
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" DEFAULT VALUES
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."event" = 'create'[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Animal"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: \nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Animal\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "animals" WHERE "animals"."id" = ?[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Animal\nspecies: \n"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE (event <> 'create')[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE (event <> 'create')
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PaperTrail::VersionTest: test: PaperTrail::Version.preceding receiving a TimeStamp should return all versions that were created before the Timestamp; descendingly by order of the `PaperTrail.timestamp_field`. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "widgets"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "widgets"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "awidgets"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "awidgets"[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "versions" ADD "custom_created_at" datetime[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."event" = 'create'
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "quia"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: \nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- quia\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "laborum"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: quia\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- quia\n- laborum\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE (versions.created_at < '2014-01-10 21:02:42.304899') ORDER BY versions.created_at DESC
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
PaperTrail::VersionTest: test: PaperTrail::Version.preceding receiving a `PaperTrail::Version` should grab the Timestamp from the version and use that as the value. 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "widgets"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "widgets"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "awidgets"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "awidgets"[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "versions" ADD "custom_created_at" datetime[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."event" = 'create'
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "sint"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: \nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- sint\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "modi"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: sint\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- sint\n- modi\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE (versions.created_at < '2014-01-10 21:02:42.319715') ORDER BY versions.created_at DESC[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PaperTrail::VersionTest: test: PaperTrail::Version.subsequent receiving a TimeStamp should return all versions that were created before the Timestamp; descendingly by order of the `PaperTrail.timestamp_field`. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "widgets"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "widgets"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "awidgets"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "awidgets"
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "versions" ADD "custom_created_at" datetime
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."event" = 'create'[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "id"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: \nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- id\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "optio"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: id\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- id\n- optio\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE (versions.created_at > '2014-01-10 20:02:42.334573') ORDER BY versions.created_at ASC[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
PaperTrail::VersionTest: test: PaperTrail::Version.subsequent receiving a `PaperTrail::Version` should grab the Timestamp from the version and use that as the value. 
----------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "widgets"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "widgets"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "awidgets"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "awidgets"
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "versions" ADD "custom_created_at" datetime
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" DEFAULT VALUES
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."event" = 'create'[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "eos"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: \nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- eos\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "similique"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: eos\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- eos\n- similique\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE (versions.created_at > '2014-01-10 21:02:42.343564') ORDER BY versions.created_at ASC
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------------------------------------------------------
PaperTrail::VersionTest: test: PaperTrail::Version.updates should return only update events. 
---------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "widgets"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "widgets"
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "awidgets"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "awidgets"[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "versions" ADD "custom_created_at" datetime[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."event" = 'create'
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Animal"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: \nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Animal\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."event" = 'update'[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."event" = 'update'
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method No options provided should removes extra versions for each item. 
-----------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "animals" ("name") VALUES (?)  [["name", "Leanna Spinka"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Leanna Spinka\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Julie Friesen"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Leanna Spinka\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Leanna Spinka\n- Julie Friesen\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Javon Hoppe"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Julie Friesen\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Julie Friesen\n- Javon Hoppe\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Delia Walsh"], ["species", "Dog"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Delia Walsh\nid:\n- \n- 2\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Estella Weimann"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Delia Walsh\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Delia Walsh\n- Estella Weimann\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Katrina Nikolaus"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Estella Weimann\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Estella Weimann\n- Katrina Nikolaus\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Desmond Gleichner"], ["species", "Cat"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Desmond Gleichner\nid:\n- \n- 3\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Davion Parker"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Desmond Gleichner\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Desmond Gleichner\n- Davion Parker\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Dr. Theo Feil"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Davion Parker\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Davion Parker\n- Dr. Theo Feil\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions"[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 4]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 5]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 7]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 8]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 3], ["item_type", "Animal"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method No options provided should removes the earliest version(s). 
------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "animals" ("name") VALUES (?)[0m  [["name", "Benton Nicolas"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Benton Nicolas\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Rigoberto Kuphal"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Benton Nicolas\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Benton Nicolas\n- Rigoberto Kuphal\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Dr. Ted Kunde"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Rigoberto Kuphal\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Rigoberto Kuphal\n- Dr. Ted Kunde\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Santina Orn"], ["species", "Dog"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Santina Orn\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Tod Stamm"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Santina Orn\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Santina Orn\n- Tod Stamm\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Willy Leffler"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Tod Stamm\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Tod Stamm\n- Willy Leffler\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Ashlynn O'Keefe"], ["species", "Cat"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Ashlynn O'Keefe\nid:\n- \n- 3\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Carmel Feeney Jr."]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Ashlynn O'Keefe\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Ashlynn O'Keefe\n- Carmel Feeney Jr.\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Roxanne Tromp"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Carmel Feeney Jr.\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Carmel Feeney Jr.\n- Roxanne Tromp\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36mAnimal Load (0.1ms)[0m  [1mSELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36mAnimal Load (0.0ms)[0m  [1mSELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 3], ["item_type", "Animal"]]
  [1m[36mAnimal Load (0.0ms)[0m  [1mSELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1[0m  [["id", 3]]
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions"
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 4]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 7]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 8]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 2], ["item_type", "Animal"]]
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 3], ["item_type", "Animal"]]
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 3]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method `:date` option should restrict the versions destroyed to those that were created on the date provided. 
-------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "animals" ("name") VALUES (?)  [["name", "Antonia Rosenbaum"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Antonia Rosenbaum\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Melvina Metz DDS"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Antonia Rosenbaum\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Antonia Rosenbaum\n- Melvina Metz DDS\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Quincy Runte"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Melvina Metz DDS\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Melvina Metz DDS\n- Quincy Runte\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Kayla Windler"], ["species", "Dog"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Kayla Windler\nid:\n- \n- 2\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Nat Frami"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Kayla Windler\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Kayla Windler\n- Nat Frami\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Halle Kris"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Nat Frami\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Nat Frami\n- Halle Kris\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Horace Brown"], ["species", "Cat"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Horace Brown\nid:\n- \n- 3\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Marquis Lynch I"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Horace Brown\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Horace Brown\n- Marquis Lynch I\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Izabella Langworth"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Marquis Lynch I\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Marquis Lynch I\n- Izabella Langworth\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Roma Gorczany"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Quincy Runte\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Quincy Runte\n- Roma Gorczany\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10') ORDER BY created_at ASC, versions.created_at ASC  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09 21:02:42.462760') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09 21:02:42.464864') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35mAnimal Load (0.1ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09 21:02:42.466948') ORDER BY created_at ASC, versions.created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35mAnimal Load (0.0ms)[0m  SELECT "animals".* FROM "animals" WHERE "animals"."id" = ? ORDER BY "animals"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10') ORDER BY versions.created_at ASC[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method `:item_id` option collection of ID's received should restrict the versions destroyed to the versions for the Item with those ID's. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "animals" ("name") VALUES (?)[0m  [["name", "Dr. Keshawn Schuster"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Dr. Keshawn Schuster\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Carey Heathcote"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Dr. Keshawn Schuster\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dr. Keshawn Schuster\n- Carey Heathcote\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Lyric Bartell"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Carey Heathcote\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Carey Heathcote\n- Lyric Bartell\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Dr. Brooke Stiedemann"], ["species", "Dog"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Dr. Brooke Stiedemann\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Mae Langworth"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Dr. Brooke Stiedemann\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dr. Brooke Stiedemann\n- Mae Langworth\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Hassan Jenkins"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Mae Langworth\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Mae Langworth\n- Hassan Jenkins\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Kirstin Weber"], ["species", "Cat"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Kirstin Weber\nid:\n- \n- 3\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Carlie Robel"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Kirstin Weber\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Kirstin Weber\n- Carlie Robel\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Imelda D'Amore"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Carlie Robel\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Carlie Robel\n- Imelda D'Amore\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" IN (1, 2)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 4]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method `:item_id` option single ID received should restrict the versions destroyed to the versions for the Item with that ID. 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "animals" ("name") VALUES (?)[0m  [["name", "Ms. Vidal Muller"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Ms. Vidal Muller\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Reilly Haley"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Ms. Vidal Muller\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Ms. Vidal Muller\n- Reilly Haley\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Davon Farrell"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Reilly Haley\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Reilly Haley\n- Davon Farrell\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Taryn Rice"], ["species", "Dog"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Taryn Rice\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Dennis Hane"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Taryn Rice\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Taryn Rice\n- Dennis Hane\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Randall Donnelly"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Dennis Hane\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dennis Hane\n- Randall Donnelly\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Barney Mosciski"], ["species", "Cat"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Barney Mosciski\nid:\n- \n- 3\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Ms. Kianna Keeling"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Barney Mosciski\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Barney Mosciski\n- Ms. Kianna Keeling\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Lucy Langworth"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Ms. Kianna Keeling\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Ms. Kianna Keeling\n- Lucy Langworth\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method `:keeping` option should modifies the number of versions ommitted from destruction. 
------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "animals" ("name") VALUES (?)  [["name", "Mrs. Katelynn Orn"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Mrs. Katelynn Orn\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Ms. Kurtis Connelly"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Mrs. Katelynn Orn\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Mrs. Katelynn Orn\n- Ms. Kurtis Connelly\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Freeda Renner"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Ms. Kurtis Connelly\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Ms. Kurtis Connelly\n- Freeda Renner\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Arturo Gulgowski V"], ["species", "Dog"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Arturo Gulgowski V\nid:\n- \n- 2\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Miss Daniella Goldner"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Arturo Gulgowski V\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Arturo Gulgowski V\n- Miss Daniella Goldner\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Marcel Stracke"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Miss Daniella Goldner\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Miss Daniella Goldner\n- Marcel Stracke\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Sarina Runolfsdottir"], ["species", "Cat"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Sarina Runolfsdottir\nid:\n- \n- 3\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Finn O'Reilly"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Sarina Runolfsdottir\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Sarina Runolfsdottir\n- Finn O'Reilly\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Karley Batz"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Finn O'Reilly\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Finn O'Reilly\n- Karley Batz\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions"[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 4]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 7]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 2], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 3], ["item_type", "Animal"]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method options combinations `:date` , `:item_id`, and `:keeping` should restrict cleaning properly. 
---------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "animals" ("name") VALUES (?)  [["name", "Kris Nienow"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Kris Nienow\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Leland Littel"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Kris Nienow\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Kris Nienow\n- Leland Littel\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Mariela Kerluke"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Leland Littel\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Leland Littel\n- Mariela Kerluke\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Ariane Bradtke"], ["species", "Dog"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Ariane Bradtke\nid:\n- \n- 2\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Josianne Ruecker"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Ariane Bradtke\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Ariane Bradtke\n- Josianne Ruecker\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Berenice Schmidt V"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Josianne Ruecker\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Josianne Ruecker\n- Berenice Schmidt V\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Elroy Shanahan"], ["species", "Cat"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Elroy Shanahan\nid:\n- \n- 3\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Tyrell Considine"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Elroy Shanahan\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Elroy Shanahan\n- Tyrell Considine\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Cheyanne Gerlach I"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Tyrell Considine\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Tyrell Considine\n- Cheyanne Gerlach I\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Jaylan Von"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Mariela Kerluke\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Mariela Kerluke\n- Jaylan Von\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 2], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 4[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 5  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 6[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Summer Kulas III"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Berenice Schmidt V\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Berenice Schmidt V\n- Summer Kulas III\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = 2 AND (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10') ORDER BY versions.created_at ASC[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 4]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 2], ["item_type", "Animal"]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10')  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method options combinations `:date` and `:item_id` should restrict cleaning properly. 
-------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "animals" ("name") VALUES (?)[0m  [["name", "Florian Wunsch"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Florian Wunsch\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Diana Reynolds"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Florian Wunsch\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Florian Wunsch\n- Diana Reynolds\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Carole Walsh"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Diana Reynolds\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Diana Reynolds\n- Carole Walsh\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Magnus Beier"], ["species", "Dog"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Magnus Beier\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Deven Heller"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Magnus Beier\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Magnus Beier\n- Deven Heller\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Ada Simonis"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Deven Heller\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Deven Heller\n- Ada Simonis\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Dayne Funk"], ["species", "Cat"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Dayne Funk\nid:\n- \n- 3\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Alfonzo Glover"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Dayne Funk\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dayne Funk\n- Alfonzo Glover\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Sigrid Rau V"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Alfonzo Glover\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Alfonzo Glover\n- Sigrid Rau V\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Keyshawn Goodwin"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Carole Walsh\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Carole Walsh\n- Keyshawn Goodwin\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 4  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 5[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 6  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Keara Ratke"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Ada Simonis\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Ada Simonis\n- Keara Ratke\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = 2 AND (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10') ORDER BY versions.created_at ASC
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 4]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.0ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 2], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10')  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method options combinations `:date` and `:keeping` should restrict cleaning properly. 
-------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "animals" ("name") VALUES (?)[0m  [["name", "Delphia Farrell"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Delphia Farrell\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Mrs. Maiya Kovacek"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Delphia Farrell\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Delphia Farrell\n- Mrs. Maiya Kovacek\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Mckenzie Kuhlman"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Mrs. Maiya Kovacek\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Mrs. Maiya Kovacek\n- Mckenzie Kuhlman\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Eileen Herman"], ["species", "Dog"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Eileen Herman\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Lukas Kuhic"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Eileen Herman\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Eileen Herman\n- Lukas Kuhic\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Alize Satterfield"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Lukas Kuhic\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Lukas Kuhic\n- Alize Satterfield\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Carli Considine"], ["species", "Cat"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Carli Considine\nid:\n- \n- 3\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Niko Leffler"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Carli Considine\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Carli Considine\n- Niko Leffler\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Dr. Domenica Schaden"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Niko Leffler\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Niko Leffler\n- Dr. Domenica Schaden\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Mr. Tyrique Bailey"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Mckenzie Kuhlman\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Mckenzie Kuhlman\n- Mr. Tyrique Bailey\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 4  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 5[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 6  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Parker VonRueden"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Alize Satterfield\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Alize Satterfield\n- Parker VonRueden\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10') ORDER BY versions.created_at ASC
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "versions" WHERE "versions"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 4]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10')  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 2], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10')  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method options combinations `:date` should Baseline. 
----------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "animals" ("name") VALUES (?)[0m  [["name", "Treva Hilll"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Treva Hilll\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Camron Gaylord"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Treva Hilll\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Treva Hilll\n- Camron Gaylord\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Cade Renner"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Camron Gaylord\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Camron Gaylord\n- Cade Renner\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Evalyn Schultz"], ["species", "Dog"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Evalyn Schultz\nid:\n- \n- 2\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Amely Bernier I"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Evalyn Schultz\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Evalyn Schultz\n- Amely Bernier I\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Mr. Ron Boehm"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Amely Bernier I\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Amely Bernier I\n- Mr. Ron Boehm\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "animals" ("name", "species") VALUES (?, ?)[0m  [["name", "Joey Erdman"], ["species", "Cat"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Joey Erdman\nid:\n- \n- 3\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Marquis Cormier"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Joey Erdman\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Joey Erdman\n- Marquis Cormier\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3[0m  [["name", "Elenora Marks"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Marquis Cormier\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Marquis Cormier\n- Elenora Marks\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 1  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 2[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 3  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1[0m  [["name", "Estel Gutkowski"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Cade Renner\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Cade Renner\n- Estel Gutkowski\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 4  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 5[0m  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "versions" SET "created_at" = ? WHERE "versions"."id" = 6  [["created_at", Thu, 09 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2[0m  [["name", "Tyreek Shanahan"]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Mr. Ron Boehm\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Mr. Ron Boehm\n- Tyreek Shanahan\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10')[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? AND (versions.created_at > '2014-01-09' AND versions.created_at < '2014-01-10')  [["item_id", 2], ["item_type", "Animal"]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method options combinations `:keeping` and `:item_id` should restrict cleaning properly. 
----------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "animals" ("name") VALUES (?)  [["name", "Dejah Stoltenberg"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Dejah Stoltenberg\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Kamille Schmitt"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Dejah Stoltenberg\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dejah Stoltenberg\n- Kamille Schmitt\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Philip Sanford"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Kamille Schmitt\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Kamille Schmitt\n- Philip Sanford\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Andrew Rippin PhD"], ["species", "Dog"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Andrew Rippin PhD\nid:\n- \n- 2\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Rebecca Wolff"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Andrew Rippin PhD\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Andrew Rippin PhD\n- Rebecca Wolff\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Quincy Wilderman"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Rebecca Wolff\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Rebecca Wolff\n- Quincy Wilderman\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Orpha Donnelly"], ["species", "Cat"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Orpha Donnelly\nid:\n- \n- 3\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Dedrick Stokes"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Orpha Donnelly\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Orpha Donnelly\n- Dedrick Stokes\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Bridgette Zboncak"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Dedrick Stokes\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dedrick Stokes\n- Bridgette Zboncak\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "versions" WHERE "versions"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------------------------------
PaperTrailCleanerTest: test: `clean_versions!` method should be extended by `PaperTrail` module. 
-------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "animals" ("name") VALUES (?)  [["name", "Marquise Klocko"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Marquise Klocko\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Joyce Yundt"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Marquise Klocko\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Marquise Klocko\n- Joyce Yundt\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Dr. Elfrieda Sipes"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Joyce Yundt\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Joyce Yundt\n- Dr. Elfrieda Sipes\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Jena Nitzsche"], ["species", "Dog"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Jena Nitzsche\nid:\n- \n- 2\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Danika O'Kon"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Jena Nitzsche\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Jena Nitzsche\n- Danika O'Kon\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Jennings Kuphal"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Danika O'Kon\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Danika O'Kon\n- Jennings Kuphal\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Mrs. Alfonzo Paucek"], ["species", "Cat"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Mrs. Alfonzo Paucek\nid:\n- \n- 3\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Anderson Bernier"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Mrs. Alfonzo Paucek\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Mrs. Alfonzo Paucek\n- Anderson Bernier\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Mrs. Erling Johns"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Anderson Bernier\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Anderson Bernier\n- Mrs. Erling Johns\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------
PaperTrailCleanerTest: test_Baseline
------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "animals" ("name") VALUES (?)  [["name", "Joanny Klein"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Joanny Klein\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Garrett Batz"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Joanny Klein\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Joanny Klein\n- Garrett Batz\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."id" = 1  [["name", "Herman Olson"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Animal"], ["object", "---\nid: 1\nname: Garrett Batz\nspecies: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Garrett Batz\n- Herman Olson\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Dr. Hilma Klocko"], ["species", "Dog"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 2], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Dog\nname:\n- \n- Dr. Hilma Klocko\nid:\n- \n- 2\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Hilton Deckow"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Dr. Hilma Klocko\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Dr. Hilma Klocko\n- Hilton Deckow\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Dog') AND "animals"."id" = 2  [["name", "Brenden Hettinger PhD"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 2], ["item_type", "Animal"], ["object", "---\nid: 2\nname: Hilton Deckow\nspecies: Dog\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Hilton Deckow\n- Brenden Hettinger PhD\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "animals" ("name", "species") VALUES (?, ?)  [["name", "Matilda Hagenes"], ["species", "Cat"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 3], ["item_type", "Animal"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nspecies:\n- \n- Cat\nname:\n- \n- Matilda Hagenes\nid:\n- \n- 3\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Erling Nikolaus I"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Matilda Hagenes\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Matilda Hagenes\n- Erling Nikolaus I\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "animals" SET "name" = ? WHERE "animals"."species" IN ('Cat') AND "animals"."id" = 3  [["name", "Hazle Kemmer"]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 3], ["item_type", "Animal"], ["object", "---\nid: 3\nname: Erling Nikolaus I\nspecies: Cat\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Erling Nikolaus I\n- Hazle Kemmer\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 1], ["item_type", "Animal"]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 2], ["item_type", "Animal"]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 3], ["item_type", "Animal"]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------
PaperTrailTest: test_Sanity_test
--------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
PaperTrailTest: test_Version_Number
-----------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
PaperTrailTest: test_create_with_plain_model_class
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncreated_at:\n- \n- 2014-01-10 21:02:42.850688000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.850688000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------------
PaperTrailTest: test_destroy_with_plain_model_class
---------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncreated_at:\n- \n- 2014-01-10 21:02:42.855897000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.855897000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "widgets" WHERE "widgets"."id" = ?  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "destroy"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: \na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:42.855897000 Z\nupdated_at: 2014-01-10 21:02:42.855897000 Z\ntype: \n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
PaperTrailTest: test_update_with_plain_model_class
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncreated_at:\n- \n- 2014-01-10 21:02:42.863253000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.863253000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "widgets" SET "name" = ?, "updated_at" = ? WHERE "widgets"."id" = 1  [["name", "Bugle"], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: \na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:42.863253000 Z\nupdated_at: 2014-01-10 21:02:42.863253000 Z\ntype: \n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Bugle\nupdated_at:\n- 2014-01-10 21:02:42.863253000 Z\n- 2014-01-10 21:02:42.866608000 Z\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------------------------------------
ProtectedAttrsTest: test: A model with `attr_accessible` created should be `nil` in its previous version. 
----------------------------------------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "type", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["name", "Henry"], ["type", "ProtectedWidget"], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntype:\n- \n- ProtectedWidget\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:42.879735000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.879735000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------------------------------------------------------------------------------
ProtectedAttrsTest: test: A model with `attr_accessible` created which is then updated should not be `nil` in its previous version. 
------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "type", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["name", "Henry"], ["type", "ProtectedWidget"], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntype:\n- \n- ProtectedWidget\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:42.885450000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.885450000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "updated_at" = ? WHERE "widgets"."type" IN ('ProtectedWidget') AND "widgets"."id" = 1[0m  [["name", "Jeff"], ["a_text", "Short statement"], ["an_integer", 42], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:42.885450000 Z\nupdated_at: 2014-01-10 21:02:42.885450000 Z\ntype: ProtectedWidget\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Jeff\na_text:\n- \n- Short statement\nan_integer:\n- \n- 42\nupdated_at:\n- 2014-01-10 21:02:42.885450000 Z\n- 2014-01-10 21:02:42.888620000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.1ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------------------------------------------------------------------------------
ProtectedAttrsTest: test: A model with `attr_accessible` created which is then updated should the previous version should contain right attributes. 
----------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "type", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["name", "Henry"], ["type", "ProtectedWidget"], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ntype:\n- \n- ProtectedWidget\nname:\n- \n- Henry\ncreated_at:\n- \n- 2014-01-10 21:02:42.897234000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.897234000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "widgets" SET "name" = ?, "a_text" = ?, "an_integer" = ?, "updated_at" = ? WHERE "widgets"."type" IN ('ProtectedWidget') AND "widgets"."id" = 1[0m  [["name", "Jeff"], ["a_text", "Short statement"], ["an_integer", 42], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Widget"], ["object", "---\nid: 1\nname: Henry\na_text: \nan_integer: \na_float: \na_decimal: \na_datetime: \na_time: \na_date: \na_boolean: \ncreated_at: 2014-01-10 21:02:42.897234000 Z\nupdated_at: 2014-01-10 21:02:42.897234000 Z\ntype: ProtectedWidget\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Henry\n- Jeff\na_text:\n- \n- Short statement\nan_integer:\n- \n- 42\nupdated_at:\n- 2014-01-10 21:02:42.897234000 Z\n- 2014-01-10 21:02:42.900464000 Z\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at DESC LIMIT 1  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mWidget Load (0.0ms)[0m  [1mSELECT "widgets".* FROM "widgets" WHERE "widgets"."id" = ? ORDER BY "widgets"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------
SerializerTest: test: Custom Serializer should reify with custom serializer. 
-----------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "fluxors" DEFAULT VALUES[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Fluxor"], ["object_changes", "{\"id\":[null,1]}"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1[0m  [["name", "Some more text."]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[35mFluxor Load (0.1ms)[0m  SELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."id" = ? ORDER BY "fluxors"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------------------------------
SerializerTest: test: Custom Serializer should store object_changes. 
---------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "fluxors" DEFAULT VALUES
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Fluxor"], ["object_changes", "{\"id\":[null,1]}"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1  [["name", "Some more text."]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------------------------------------
SerializerTest: test: JSON Serializer should reify with JSON serializer. 
-------------------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "fluxors" ("name") VALUES (?)  [["name", "Some text."]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Fluxor"], ["object_changes", "{\"name\":[null,\"Some text.\"],\"id\":[null,1]}"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1  [["name", "Some more text."]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPaperTrail::Version Load (0.1ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[36mFluxor Load (0.0ms)[0m  [1mSELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."id" = ? ORDER BY "fluxors"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------------------------------
SerializerTest: test: JSON Serializer should store object_changes. 
-------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "fluxors" ("name") VALUES (?)[0m  [["name", "Some text."]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Fluxor"], ["object_changes", "{\"name\":[null,\"Some text.\"],\"id\":[null,1]}"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1[0m  [["name", "Some more text."]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------------------
SerializerTest: test: YAML Serializer should work with the default `YAML` serializer. 
--------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "fluxors" ("name") VALUES (?)[0m  [["name", "Some text."]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Fluxor"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Some text.\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1[0m  [["name", "Some more text."]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC[0m  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[35mFluxor Load (0.0ms)[0m  SELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."id" = ? ORDER BY "fluxors"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (14.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------------------------------------------------------------------------------------
SinatraTest: test: `PaperTrail::Sinatra` in a `Sinatra::Application` application should sets the `user_for_paper_trail` from the `current_user` method. 
--------------------------------------------------------------------------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["name", "bar"], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes", "whodunnit") VALUES (?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- bar\ncreated_at:\n- \n- 2014-01-10 21:02:42.985044000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.985044000 Z\nid:\n- \n- 1\n"], ["whodunnit", "raboof"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mWidget Load (0.1ms)[0m  [1mSELECT "widgets".* FROM "widgets" ORDER BY "widgets"."id" ASC LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?  [["item_id", 1], ["item_type", "Widget"]]
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------
SinatraTest: test_baseline
--------------------------
  [1m[35mWidget Load (0.2ms)[0m  SELECT "widgets".* FROM "widgets" ORDER BY "widgets"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["updated_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:42 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\ncreated_at:\n- \n- 2014-01-10 21:02:42.992475000 Z\nupdated_at:\n- \n- 2014-01-10 21:02:42.992475000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
ThreadSafetyTest: test_be_thread_safe
-------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
TimestampTest: test_versions_works_with_custom_timestamp_field
--------------------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "awidgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "sacrificial_column" varchar(255), "type" varchar(255)) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "widgets"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "widgets"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "widgets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "a_text" text, "an_integer" integer, "a_float" float, "a_decimal" decimal, "a_datetime" datetime, "a_time" time, "a_date" date, "a_boolean" boolean, "created_at" datetime, "updated_at" datetime, "type" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "awidgets"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "awidgets"
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "versions" ADD "custom_created_at" datetime
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "fluxors" ("name") VALUES (?)  [["name", "Some text."]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:43 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Fluxor"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Some text.\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1  [["name", "Some more text."]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "fluxors" SET "name" = ? WHERE "fluxors"."id" = 1[0m  [["name", "Even more text."]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY custom_created_at ASC[0m  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[35mFluxor Load (0.1ms)[0m  SELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."id" = ? ORDER BY "fluxors"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mFluxor Load (0.0ms)[0m  [1mSELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."id" = ? ORDER BY "fluxors"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "custom_created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:02:43 UTC +00:00], ["custom_created_at", Fri, 10 Jan 2014 21:02:43 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Fluxor"], ["object", "---\nid: 1\nwidget_id: \nname: Some more text.\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Some more text.\n- Even more text.\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "custom_created_at", "event", "item_id", "item_type", "object", "object_changes") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:02:43 UTC +00:00], ["custom_created_at", Fri, 10 Jan 2014 21:02:44 UTC +00:00], ["event", "update"], ["item_id", 1], ["item_type", "Fluxor"], ["object", "---\nid: 1\nwidget_id: \nname: Some text.\n"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- Some text.\n- Some more text.\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "versions" SET "custom_created_at" = ? WHERE "versions"."id" = 1[0m  [["custom_created_at", Fri, 10 Jan 2014 21:02:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPaperTrail::Version Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY custom_created_at ASC[0m  [["item_id", 1], ["item_type", "Fluxor"]]
  [1m[35mFluxor Load (0.0ms)[0m  SELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."id" = ? ORDER BY "fluxors"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mFluxor Load (0.0ms)[0m  [1mSELECT "fluxors".* FROM "fluxors" WHERE "fluxors"."id" = ? ORDER BY "fluxors"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
YamlTest: test: `dump` class method should exist. 
--------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------------------------------
YamlTest: test: `dump` class method should serialize Ruby to `YAML`. 
---------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------
YamlTest: test: `load` class method should deserialize `YAML` to Ruby. 
-----------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
YamlTest: test: `load` class method should exist. 
--------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00], ["name", "Miss Josiah Gibson"], ["updated_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Miss Josiah Gibson\ncreated_at:\n- \n- 2014-01-10 21:04:07.871318000 Z\nupdated_at:\n- \n- 2014-01-10 21:04:07.871318000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mJoinedVersion Load (0.1ms)[0m  SELECT "versions".* FROM "versions" INNER JOIN widgets ON widgets.id = versions.item_id ORDER BY "versions"."id" ASC LIMIT 1
  [1m[36mJoinedVersion Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" INNER JOIN widgets ON widgets.id = versions.item_id WHERE (versions.created_at > '2014-01-10 21:04:07.893403') ORDER BY versions.created_at ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00], ["name", "Krystel Gleichner"], ["updated_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Krystel Gleichner\ncreated_at:\n- \n- 2014-01-10 21:04:07.953893000 Z\nupdated_at:\n- \n- 2014-01-10 21:04:07.953893000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mJoinedVersion Load (0.1ms)[0m  SELECT "versions".* FROM "versions" INNER JOIN widgets ON widgets.id = versions.item_id ORDER BY "versions"."id" ASC LIMIT 1
  [1m[36mJoinedVersion Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" INNER JOIN widgets ON widgets.id = versions.item_id WHERE (versions.created_at < '2014-01-10 21:04:07.956288') ORDER BY versions.created_at DESC LIMIT 1[0m
  [1m[35m (0.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00], ["name", "Luther Towne"], ["updated_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Luther Towne\ncreated_at:\n- \n- 2014-01-10 21:04:07.961537000 Z\nupdated_at:\n- \n- 2014-01-10 21:04:07.961537000 Z\nid:\n- \n- 1\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mJoinedVersion Load (0.2ms)[0m  SELECT "versions".* FROM "versions" INNER JOIN widgets ON widgets.id = versions.item_id WHERE (versions.created_at > '2014-01-10 21:04:07.965123' AND versions.created_at < '2014-01-10 21:05:07.965134') ORDER BY versions.created_at ASC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00], ["name", "Darwin Rippin"], ["updated_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:04:07 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Darwin Rippin\ncreated_at:\n- \n- 2014-01-10 21:04:07.984754000 Z\nupdated_at:\n- \n- 2014-01-10 21:04:07.984754000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mJoinedVersion Load (0.1ms)[0m  [1mSELECT "versions".* FROM "versions" INNER JOIN widgets ON widgets.id = versions.item_id ORDER BY "versions"."id" ASC LIMIT 1[0m
  [1m[35mJoinedVersion Load (0.1ms)[0m  SELECT versions.created_at, versions.id FROM "versions" INNER JOIN widgets ON widgets.id = versions.item_id WHERE "versions"."item_type" = 'Widget' AND "versions"."item_id" = 1 ORDER BY versions.created_at ASC
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "widgets" ("an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["an_integer", 1], ["created_at", Fri, 10 Jan 2014 21:04:08 UTC +00:00], ["name", "Bob"], ["updated_at", Fri, 10 Jan 2014 21:04:08 UTC +00:00]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Fri, 10 Jan 2014 21:04:08 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Widget"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- Bob\nan_integer:\n- \n- 1\ncreated_at:\n- \n- 2014-01-10 21:04:08.009007000 Z\nupdated_at:\n- \n- 2014-01-10 21:04:08.009007000 Z\nid:\n- \n- 1\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "widgets" ("an_integer", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["an_integer", 1], ["created_at", Fri, 10 Jan 2014 21:04:08 UTC +00:00], ["name", "Bob"], ["updated_at", Fri, 10 Jan 2014 21:04:08 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ?[0m  [["item_id", 1], ["item_type", "Widget"]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "documents" ("name") VALUES (?)[0m  [["name", "foobar"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:04:08 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Foo::Document"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- foobar\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "documents" ("name") VALUES (?)[0m  [["name", "raboof"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "versions" ("created_at", "event", "item_id", "item_type", "object_changes") VALUES (?, ?, ?, ?, ?)  [["created_at", Fri, 10 Jan 2014 21:04:08 UTC +00:00], ["event", "create"], ["item_id", 1], ["item_type", "Bar::Document"], ["object_changes", "--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\nname:\n- \n- raboof\nid:\n- \n- 1\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mFoo::Version Load (0.2ms)[0m  SELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1  [["item_id", 1], ["item_type", "Foo::Document"]]
  [1m[36mBar::Version Load (0.2ms)[0m  [1mSELECT "versions".* FROM "versions" WHERE "versions"."item_id" = ? AND "versions"."item_type" = ? ORDER BY created_at ASC LIMIT 1[0m  [["item_id", 1], ["item_type", "Bar::Document"]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "versions"
Started POST "/articles?article%5Bcontent%5D=Culpa+quae+facilis+vero+omnis+et+nostrum.&article%5Btitle%5D=Doh" for 127.0.0.1 at 2014-01-10 16:04:08 -0500
Processing by ArticlesController#create as HTML
  Parameters: {"article"=>{"content"=>"Culpa quae facilis vero omnis et nostrum.", "title"=>"Doh"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "articles" ("content", "title") VALUES (?, ?)  [["content", "Culpa quae facilis vero omnis et nostrum."], ["title", "Doh"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (ActiveRecord: 0.6ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "versions"
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (18.1ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (2.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to SetUpTestTables (20120208155312)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "articles" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "content" varchar(255), "abstract" varchar(255), "file_upload" varchar(255)) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20120208155312')[0m
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
